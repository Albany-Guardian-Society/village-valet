(this["webpackJsonpvillage-valet"]=this["webpackJsonpvillage-valet"]||[]).push([[0],{129:function(e,t,a){},179:function(e,t,a){},343:function(e,t,a){e.exports=a.p+"static/media/VillageValetLogo.c991a6eb.jpg"},361:function(e,t,a){e.exports=a(646)},390:function(e,t){},392:function(e,t){},427:function(e,t){},428:function(e,t){},518:function(e,t){},519:function(e,t){},646:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(79),i=a.n(l),o=a(15),s=a(16),c=a(18),d=a(17),u=a(19),p=a(14),m=a(63),h=a(84),v=(a(179),a(43)),g=a.n(v),E=a(36),f=a(7),_=a(341),y=window&&window.location&&window.location.hostname;"localhost"===y&&(y+=":4200");var b="http://".concat(y,"/api/").concat("v1"),C=a(28),k=a.n(C),O=a(339),w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={status:0,message:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=k.a.load("token");this.setState({message:"Loading Operator"});var a=O.decode(t);g.a.get(b+"/database/operators/self",{headers:{Authorization:"BEARER "+t}}).then((function(r){e.props.updateAuth(r.data),"admin"===a.village_id&&g.a.get(b+"/database/operators/all",{headers:{Authorization:"BEARER "+t}}).then((function(t){var a={},r=!0,n=!1,l=void 0;try{for(var i,o=t.data[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;a[s.id]=s}}catch(c){n=!0,l=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw l}}e.props.load("operators",a)})),e.setState({message:"Loading Village"}),g.a.get(b+"/database/villages/all",{headers:{Authorization:"BEARER "+t}}).then((function(t){var a={},r=!0,n=!1,l=void 0;try{for(var i,o=t.data[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;a[s.id]=s}}catch(c){n=!0,l=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw l}}e.props.load("villages",a)})).then((function(){e.setState({status:20})})).then((function(){e.setState({message:"Loading Users"}),g.a.get(b+"/database/users/all",{headers:{Authorization:"BEARER "+t}}).then((function(t){var a={},r=!0,n=!1,l=void 0;try{for(var i,o=t.data[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;a[s.id]=s}}catch(c){n=!0,l=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw l}}e.props.load("users",a)})).then((function(){e.setState({status:60})})).then((function(){e.setState({message:"Loading Rides"}),g.a.get(b+"/database/rides/all",{headers:{Authorization:"BEARER "+t}}).then((function(t){var a={},r=!0,n=!1,l=void 0;try{for(var i,o=t.data[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;a[s.id]=s}}catch(c){n=!0,l=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw l}}e.props.load("rides",a)})).then((function(){e.setState({status:80})})).then((function(){g.a.get(b+"/admin/googlemaps",{headers:{Authorization:"BEARER "+t}}).then((function(t){k.a.save("googlemapstoken",t.data.token,{path:"/",maxAge:3600}),k.a.save("token",t.headers.token,{path:"/",maxAge:3600}),e.setState({status:100})})).then((function(){e.props.load("loaded",!0)}))}))}))}))}))}},{key:"render",value:function(){return n.a.createElement("div",{style:{padding:100}},n.a.createElement(E.a,null,n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,"Loading..."),n.a.createElement(f.a.Body,null,n.a.createElement(_.a,{animated:!0,now:this.state.status})))))}}]),t}(r.Component),j=Object(p.b)((function(e){return{village_id:e.operator.village_id}}),(function(e){return{updateAuth:function(t){return e({type:"authenticate",payload:t})},load:function(t,a){return e({type:"load",payload:{tag:t,data:a}})}}}))(w),A=a(237),D=a(4),S=a(26),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"logout",value:function(){k.a.remove("token"),k.a.remove("googlemapstoken"),k.a.remove("is_admin"),k.a.remove("operator_id"),window.location.reload()}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(A.a,{bg:"light",variant:"light",style:{width:"100%"}},n.a.createElement(A.a.Brand,null,n.a.createElement(m.b,{to:"/Dashboard",style:{textDecoration:"none"}},"Village Valet")),n.a.createElement(D.a,null,n.a.createElement(m.b,{to:"/Scheduler",style:{textDecoration:"none"}},"Scheduler")),n.a.createElement(D.a,null,n.a.createElement(m.b,{to:"/Profiles",style:{textDecoration:"none"}},"Profiles")),n.a.createElement(D.a,null,n.a.createElement(m.b,{to:"/Ledger",style:{textDecoration:"none"}},"Ledger")),n.a.createElement(D.a,null,n.a.createElement(m.b,{to:"/Metrics",style:{textDecoration:"none"}},"Metrics")),n.a.createElement(D.a,null,this.props.operator.admin?n.a.createElement(m.b,{to:"/Admin",style:{textDecoration:"none"}},"Admin"):null),n.a.createElement(D.a,{style:{textAlign:"right"}},n.a.createElement("span",null,"Operator:\xa0",this.props.operator.first_name)),n.a.createElement(D.a,null,n.a.createElement(S.a,{variant:"dark",onClick:this.logout}," Logout "))),n.a.createElement("br",null))}}]),t}(r.Component),L=Object(p.b)((function(e){return{operator:e.operator,village_id:e.operator.village_id}}),(function(e){return{}}))(N),P=a(100),I=a(11),R=a(8),V=a(3),T=a(119),H=a(344),M=a(343),x=a.n(M),B=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).key_function=function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById("login_button").click())},a.state={username:"",password:"",showPassword:!1,errorMessage:""},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a.handleLogin=a.handleLogin.bind(Object(I.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(I.a)(a)),a.componentWillUnmount=a.componentWillUnmount.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.key_function)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.key_function)}},{key:"handleChange",value:function(e){"username"===e.target.id?this.setState({username:e.target.value}):"password"===e.target.id&&this.setState({password:e.target.value})}},{key:"handleLogin",value:function(){var e=this;g.a.post(b+"/admin/login",{username:this.state.username.toLowerCase(),password:this.state.password}).then((function(t){k.a.save("token",t.headers.token,{path:"/",maxAge:3600});var a=Object(P.a)({},t.data);e.props.updateAuth(a),e.props.history.push("/Dashboard"),window.location.reload()})).catch((function(t){e.setState({errorMessage:"Login Failed: "+t.response.data.error})}))}},{key:"render",value:function(){return n.a.createElement(E.a,{className:"Login"},n.a.createElement("br",null),n.a.createElement(R.a,null,n.a.createElement(D.a,null,n.a.createElement(H.a,{src:x.a,className:"Login-Logo"}))),n.a.createElement("br",null),n.a.createElement(R.a,null,n.a.createElement(D.a,null,this.state.errorMessage?n.a.createElement(T.a,{variant:"danger"},this.state.errorMessage):null)),n.a.createElement(R.a,null,n.a.createElement(D.a,null,n.a.createElement(f.a,{className:"Login-Box"},n.a.createElement(V.a,null,n.a.createElement(V.a.Group,{as:R.a},n.a.createElement(V.a.Label,{column:!0,sm:2},"Username:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"username",placeholder:"Username",onChange:this.handleChange}))),n.a.createElement(V.a.Group,{as:R.a},n.a.createElement(V.a.Label,{column:!0,sm:2},"Password:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{type:"password",id:"password",placeholder:"Password",onChange:this.handleChange}))),n.a.createElement(S.a,{id:"login_button",variant:"primary",onClick:this.handleLogin},"Login"))))))}}]),t}(r.Component),U=Object(h.f)(Object(p.b)((function(e){return{authenticated:e.authenticated}}),(function(e){return{updateAuth:function(t){return e({type:"authenticate",payload:t})}}}))(B)),Y=a(21),F=a.n(Y),z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClick=function(e){a.props.changeRideBreakdown(e)},a.createTable=function(){if(null!=a.props.rides){var e=[],t=!0,r=!1,l=void 0;try{for(var i,o=function(){var t=i.value;e.push(n.a.createElement(R.a,{style:{padding:"5px"},key:t.id},n.a.createElement(S.a,{size:"lg",variant:"light",block:!0,onClick:function(){return a.handleClick(t)}},"Ride Id: ".concat(t.id))))},s=a.props.rides[Symbol.iterator]();!(t=(i=s.next()).done);t=!0)o()}catch(c){r=!0,l=c}finally{try{t||null==s.return||s.return()}finally{if(r)throw l}}return e}},a.state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){}},{key:"render",value:function(){return n.a.createElement(E.a,null,this.createTable())}}]),t}(r.Component),W=Object(p.b)((function(e){return{}}),(function(e){return{changeRideBreakdown:function(t){return e({type:"active_ride",payload:t})}}}))(z),G=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){}},{key:"filterRides",value:function(){if(this.props.rides)return Object.values(this.props.rides).filter((function(e){return e.ride_data.date===Y().format("YYYY-MM-DD")&&Y(e.locations.pickup.time,"HH:mm").isSameOrBefore({h:Y().hours(),m:Y().minutes()})&&Y(e.locations.dropoff.time,"HH:mm").isSameOrAfter({h:Y().hours(),m:Y().minutes()})}))}},{key:"render",value:function(){return n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,"Active Rides"),n.a.createElement(f.a.Body,{style:{alignItems:"center"}},n.a.createElement(W,{rides:this.filterRides()})))}}]),t}(r.Component),Z=Object(p.b)((function(e){return{rides:e.rides}}),(function(e){return{}}))(G),K=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){}},{key:"filterRides",value:function(){if(this.props.rides)return Object.values(this.props.rides).filter((function(e){return e.ride_data.date===Y().format("YYYY-MM-DD")&&Y(e.locations.pickup.time,"HH:mm").isAfter({h:Y().hours(),m:Y().minutes()})}))}},{key:"render",value:function(){return n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,"Upcoming Rides"),n.a.createElement(f.a.Body,null,n.a.createElement(W,{rides:this.filterRides()})))}}]),t}(r.Component),X=Object(p.b)((function(e){return{rides:e.rides}}),(function(e){return{}}))(K),$=a(60),J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={directions_cache:new Map},a.locations={},a.timePast=!1,a.timeNow=null,a.directionsCallback=a.directionsCallback.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,a){return""!==e.ride.locations.pickup.geolocation&&""!==e.ride.locations.dropoff.geolocation&&(this.props.ride.locations.pickup.geolocation.lat!==e.ride.locations.pickup.geolocation.lat||this.props.ride.locations.dropoff.geolocation.lat!==e.ride.locations.dropoff.geolocation.lat)||null!=t.response&&this.state.response!==t.response||this.props.ride.driver.id!==e.ride.driver.id}},{key:"convertMetersToMiles",value:function(e){return Math.round(100*(62137e-8*e+Number.EPSILON))/100}},{key:"storeRouteInfo",value:function(e){this.props.ride.ride_data.associated_ride&&this.props.ride.ride_data.associated_ride.driver_id===this.props.ride.driver.id?(this.props.ride.ride_data.mileage.rider=this.convertMetersToMiles(e.routes[0].legs[0].distance.value),this.props.ride.ride_data.time_total.rider=e.routes[0].legs[0].duration.value):(this.props.ride.ride_data.mileage.rider=this.convertMetersToMiles(e.routes[0].legs[1].distance.value),this.props.ride.ride_data.time_total.rider=e.routes[0].legs[1].duration.value),this.props.ride.driver.id&&(this.props.ride.ride_data.mileage.driver=this.convertMetersToMiles(e.routes[0].legs[0].distance.value)+this.convertMetersToMiles(e.routes[0].legs[1].distance.value),this.props.ride.ride_data.time_total.driver=e.routes[0].legs[0].duration.value+e.routes[0].legs[1].duration.value),this.props.updateActiveRide(this.props.ride)}},{key:"checkTimeInPast",value:function(){this.timeNow=Y(),""!==this.props.ride.ride_data.date&&""!==this.props.ride.locations.pickup.time?this.timePast=Y(this.props.ride.ride_data.date+" "+this.props.ride.locations.pickup.time,"YYYY-MM-DD HH:mm").isBefore(this.timeNow):this.timePast=!0}},{key:"directionsCallback",value:function(e){var t;null!==e&&("OK"===e.status?(t="waypoint"in Object.keys(this.locations)?this.locations.origin.lat+this.locations.destination.lat+this.locations.waypoint.location.lat:this.locations.origin.lat+this.locations.destination.lat,this.storeRouteInfo(e),this.state.directions_cache.set(t,e),this.setState({directions_cache:this.state.directions_cache,response:e})):console.log("response: ",e))}},{key:"locationOrder",value:function(){null!=this.props.ride.locations.dropoff&&null!=this.props.ride.locations.pickup&&(this.props.ride.driver.id?this.props.ride.ride_data.associated_ride&&this.props.ride.ride_data.associated_ride.driver_id===this.props.ride.driver.id?(this.locations.origin=this.props.ride.locations.pickup.geolocation,this.locations.destination=this.props.ride.driver.geolocation,this.locations.waypoint=[{location:this.props.ride.locations.dropoff.geolocation,stopover:!0}]):(this.locations.origin=this.props.ride.driver.geolocation,this.locations.destination=this.props.ride.locations.dropoff.geolocation,this.locations.waypoint=[{location:this.props.ride.locations.pickup.geolocation,stopover:!0}]):(this.locations.origin=this.props.ride.locations.pickup.geolocation,this.locations.destination=this.props.ride.locations.dropoff.geolocation))}},{key:"makeDirections",value:function(){var e=this;if(this.locations.origin.lat&&this.locations.destination.lat){var t;if(t="waypoint"in Object.keys(this.locations)?this.locations.origin.lat+this.locations.destination.lat+this.locations.waypoint.location.lat:this.locations.origin.lat+this.locations.destination.lat,!this.state.directions_cache.has(t))return n.a.createElement($.c,{options:{origin:this.locations.origin,destination:this.locations.destination,travelMode:"DRIVING",waypoints:this.locations.waypoint,optimizeWaypoints:!1,drivingOptions:{departureTime:this.timePast?this.timeNow.toDate():Y(this.props.ride.ride_data.date+" "+this.props.ride.locations.pickup.time,"YYYY-MM-DD HH:mm").toDate(),trafficModel:"pessimistic"}},callback:function(t){e.directionsCallback(t)},onLoad:function(e){console.log("DirectionsService onLoad directionsService: ",e)},onUnmount:function(e){console.log("DirectionsService onUnmount directionsService: ",e)}});this.setState({directions_cache:this.state.directions_cache,response:this.state.directions_cache.get(t)})}}},{key:"renderDirections",value:function(){if(this.state.response)return n.a.createElement($.b,{options:{directions:this.state.response},onLoad:function(e){console.log("DirectionsRenderer onLoad directionsRenderer: ",e)},onUnmount:function(e){console.log("DirectionsRenderer onUnmount directionsRenderer: ",e)}})}},{key:"render",value:function(){return n.a.createElement($.d,{id:"map",zoom:8,mapContainerStyle:{width:"100%",height:"100%"},center:{lat:42.6526,lng:-73.7562}},this.locationOrder(),this.checkTimeInPast(),this.locations&&this.makeDirections(),this.renderDirections())}}]),t}(r.Component),q=Object(p.b)((function(e){return{ride:e.active_ride}}),(function(e){return{updateActiveRide:function(t){return e({type:"update_active_ride",payload:t})}}}))(J),Q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){}},{key:"displayDetails",value:function(){return""===this.props.ride.id?n.a.createElement("div",null):n.a.createElement("div",null,"Ride Id: ",this.props.ride.id,n.a.createElement("br",null),"Rider Name: ","".concat(this.props.ride.rider.first_name," ").concat(this.props.ride.rider.last_name)," ",n.a.createElement("br",null),"Driver Name: ","".concat(this.props.ride.driver.first_name," ").concat(this.props.ride.driver.last_name)," ",n.a.createElement("br",null),"Date: ",this.props.ride.ride_data.date," ",n.a.createElement("br",null),"Pickup Time: ",Y(this.props.ride.locations.pickup.time,"HH:mm").format("hh:mm a")," ",n.a.createElement("br",null),"Dropoff Time: ",Y(this.props.ride.locations.dropoff.time,"HH:mm").format("hh:mm a")," ",n.a.createElement("br",null))}},{key:"render",value:function(){return n.a.createElement(E.a,null,this.displayDetails())}}]),t}(r.Component),ee=Object(p.b)((function(e){return{ride:e.active_ride}}),(function(e){return{}}))(Q),te=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){}},{key:"render",value:function(){return n.a.createElement(f.a,{style:{height:"100%"}},n.a.createElement(f.a.Header,null,"Ride Breakdown"),n.a.createElement(f.a.Body,null,n.a.createElement(ee,null),n.a.createElement("div",{style:{position:"relative",width:"100%",height:"300px"}},n.a.createElement(q,null))))}}]),t}(r.Component),ae=Object(p.b)((function(e){return{}}),(function(e){return{}}))(te),re=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){}},{key:"render",value:function(){return n.a.createElement(E.a,{style:{minWidth:"100%"}},n.a.createElement(R.a,null,n.a.createElement(D.a,null,n.a.createElement(X,null)),n.a.createElement(D.a,null,n.a.createElement(Z,null)),n.a.createElement(D.a,null,n.a.createElement(ae,null))))}}]),t}(r.Component),ne=Object(p.b)((function(e){return{}}),(function(e){return{}}))(re),le=a(345),ie=a.n(le),oe=a(37),se=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={selected_row:""},a.generateTableData=a.generateTableData.bind(Object(I.a)(a)),a.generateTableHeaders=a.generateTableHeaders.bind(Object(I.a)(a)),a.handleSelect=a.handleSelect.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleSelect",value:function(e){this.setState({selected_row:e.target.id}),this.props.setActiveUser(this.props.users[e.target.id]),"all"===this.props.mode?this.props.history.push("/Profiles/User/"+e.target.id):"rider"===this.props.mode?this.props.setRideParticipant("rider",this.props.users[e.target.id]):"driver"===this.props.mode&&this.props.setRideParticipant("driver",this.props.users[e.target.id])}},{key:"generateTableHeaders",value:function(){var e;switch(this.props.mode){case"driver":case"rider":e=["Picture","First Name","Last Name","Village","Database ID"];break;case"all":e=["User Type","Last Name","First Name","Village","Status","Database ID"];break;default:e=["User Type","First Name","Last Name","Village","Database ID"]}return e.map((function(e){return n.a.createElement("th",{key:e},e)}))}},{key:"generateTableData",value:function(){var e,t=this,a=[];if(this.props.search_term){var r=-1;e=ie.a.go(this.props.search_term,Object.values(this.props.users).map((function(e){return r++,e.personal_info.first_name+e.personal_info.last_name+"|"+r}))).filter((function(e){return e.score>-2e3})).map((function(e){return Object.values(t.props.users)[e.target.split("|")[e.target.split("|").length-1]]}))}else e=Object.values(this.props.users);if(e=e.filter((function(e){switch(t.props.mode){case"driver":return"driver"===e.user_type&&"active"===e.status;case"rider":return"rider"===e.user_type&&"active"===e.status;case"all":default:return!0}})),"driver"===this.props.mode&&this.props.active_ride.locations.pickup.time&&this.props.active_ride.locations.dropoff.time){var l=F()(this.props.active_ride.ride_data.date,"YYYY-MM-DD");(e=(e=e.filter((function(e){if("inactive"===e.status)return!1;for(var a=0;a<e.volunteer_hours.length;a++)if(console.log(l.day()%7,Number(e.volunteer_hours[a].day)),l.day()%7===Number(e.volunteer_hours[a].day)&&F()(e.volunteer_hours[a].start,"HH:mm").isBefore(F()(t.props.active_ride.locations.pickup.time,"HH:mm"))&&F()(e.volunteer_hours[a].end,"HH:mm").isAfter(F()(t.props.active_ride.locations.dropoff.time,"HH:mm")))return!0;return!1}))).filter((function(e){for(var a=0,r=Object.values(t.props.rides);a<r.length;a++){var n=r[a],i=F()(n.locations.dropoff.time,"HH:mm").subtract(n.ride_data.time_total.driver,"second");if(l===F()(n.ride_data.date,"YYYY-MM-DD")&&e.id===n.driver.id&&n.rider.id===t.props.active_ride.rider.id){if(i.isAfter(F()(t.props.active_ride.locations.pickup.time,"HH:mm"))&&i.isBefore(F()(t.props.active_ride.locations.dropoff.time,"HH:mm")))return!1;if(F()(n.locations.dropoff.time,"HH:mm").isAfter(F()(t.props.active_ride.locations.pickup.time,"HH:mm"))&&F()(n.locations.dropoff.time,"HH:mm").isBefore(F()(t.props.active_ride.locations.dropoff.time,"HH:mm")))return!1}else if(l===F()(n.ride_data.date,"YYYY-MM-DD")&&e.id===n.driver.id){if(i.isAfter(F()(t.props.active_ride.locations.pickup.time,"HH:mm").subtract(30,"minute"))&&i.isBefore(F()(t.props.active_ride.locations.dropoff.time,"HH:mm")))return!1;if(F()(n.locations.dropoff.time,"HH:mm").isAfter(F()(t.props.active_ride.locations.pickup.time,"HH:mm").subtract(30,"minute"))&&F()(n.locations.dropoff.time,"HH:mm").isBefore(F()(t.props.active_ride.locations.dropoff.time,"HH:mm")))return!1}}return!0}))).sort((function(e,a){var r=Math.pow(Math.pow(e.addresses[0].geolocation.lat-t.props.active_ride.locations.pickup.geolocation.lat,2)+Math.pow(e.addresses[0].geolocation.lng-t.props.active_ride.locations.pickup.geolocation.lng,2),.5),n=Math.pow(Math.pow(a.addresses[0].geolocation.lat-t.props.active_ride.locations.dropoff.geolocation.lat,2)+Math.pow(a.addresses[0].geolocation.lng-t.props.active_ride.locations.dropoff.geolocation.lng,2),.5);return r<n?-1:r===n?0:1}))}else e.sort((function(e,t){return e.status===t.status?e.user_type===t.user_type?e.personal_info.last_name===t.personal_info.last_name?e.personal_info.first_name>t.personal_info.first_name?1:-1:e.personal_info.last_name>t.personal_info.last_name?1:-1:"rider"===e.user_type?-1:1:"active"===e.status?-1:1}));for(var i in e){var o=e[i];a.push(n.a.createElement("tr",{key:o.id,style:this.state.selected_row===o.id?{background:"#cce4ff",display:"table",width:"100%",tableLayout:"fixed"}:{display:"table",width:"100%",tableLayout:"fixed"}},"all"===this.props.mode?n.a.createElement("td",{id:o.id,onClick:function(e){return t.handleSelect(e)}},o.user_type.replace(/^\w/,(function(e){return e.toUpperCase()}))):n.a.createElement("td",{id:o.id,onClick:function(e){return t.handleSelect(e)}},"PICTURE"),"all"===this.props.mode?n.a.createElement(n.a.Fragment,null,n.a.createElement("td",{id:o.id,onClick:function(e){return t.handleSelect(e)}},o.personal_info.last_name),n.a.createElement("td",{id:o.id,onClick:function(e){return t.handleSelect(e)}},o.personal_info.first_name)):n.a.createElement(n.a.Fragment,null,n.a.createElement("td",{id:o.id,onClick:function(e){return t.handleSelect(e)}},o.personal_info.first_name),n.a.createElement("td",{id:o.id,onClick:function(e){return t.handleSelect(e)}},o.personal_info.last_name)),n.a.createElement("td",{id:o.id,onClick:function(e){return t.handleSelect(e)}},o.primary_village_id),"all"===this.props.mode?n.a.createElement("td",{id:o.id,onClick:function(e){return t.handleSelect(e)}},o.status.replace(/^\w/,(function(e){return e.toUpperCase()}))):null,n.a.createElement("td",{id:o.id,onClick:function(e){return t.handleSelect(e)}},o.id)))}return a}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(oe.a,{striped:!0,bordered:!0,hover:!0,style:{width:"100%"}},n.a.createElement("thead",{style:{display:"table"}},n.a.createElement("tr",{style:{display:"table",tableLayout:"fixed",width:"100%"}},this.generateTableHeaders())),n.a.createElement("tbody",{style:{display:"block",height:"100%",width:"100%",overflow:"auto"}},this.generateTableData())))}}]),t}(r.Component),ce=Object(h.f)(Object(p.b)((function(e){return{users:e.users,active_ride:e.active_ride,rides:e.rides}}),(function(e){return{setActiveUser:function(t){return e({type:"set_active_user",payload:t})},setRideParticipant:function(t,a){return e({type:"set_ride_participant",payload:{type:t,user:a}})}}}))(se)),de=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={search_term:""},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({search_term:e.target.value})}},{key:"render",value:function(){return n.a.createElement(E.a,{className:"SelectRider",style:{minWidth:"100%"}},n.a.createElement("h1",null,"Select Rider"),n.a.createElement(R.a,null,n.a.createElement(D.a,{sm:12},n.a.createElement(V.a.Control,{type:"search",id:"search",placeholder:"Search",onChange:this.handleChange}))),n.a.createElement("hr",null),n.a.createElement(ce,{search_term:this.state.search_term,mode:"rider"}))}}]),t}(r.Component),ue=Object(p.b)((function(e){return{users:e.users}}),(function(e){return{}}))(de),pe=a(83),me=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={addresses:{}},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a.handleCommonAddress=a.handleCommonAddress.bind(Object(I.a)(a)),a.autocomplete={},a.count=0,a.onLoad=a.onLoad.bind(Object(I.a)(a)),a.onPlaceChanged=a.onPlaceChanged.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=F()();this.props.active_ride.ride_data.date||this.props.updateScheduler("date",null,e.add(8,"days").format("YYYY-MM-DD"))}},{key:"handleChange",value:function(e){var t=e.target.id.split("_");"date"===t[1]?this.props.updateScheduler(t[1],null,e.target.value):"purpose"===t[1]?this.props.updateScheduler(t[1],null,e.target.value):"meta"===t[1]&&"samereturn"===t[2]?this.props.updateScheduler(t[2],null,e.target.checked):this.props.updateScheduler(t[1],t[2],e.target.value)}},{key:"handleCommonAddress",value:function(e,t){"other"===e.target.value?this.props.updateScheduler("common_address","set|"+t,e.target.value):this.props.updateScheduler("common_address",t,this.props.active_ride.rider.id+"|"+e.target.value.replace("addr_",""))}},{key:"getSelectedItems",value:function(){for(var e=[],t=[],a=0;a<this.props.users.length;a++)if(this.props.users[a].id===this.props.active_ride.rider.id)this.props.users[a].addresses;for(var r=0;r<t.length;r++)e.push(n.a.createElement("option",{key:r,value:r},r));return e}},{key:"onLoad",value:function(e){this.autocomplete[this.count]=e,this.count+=1}},{key:"onPlaceChanged",value:function(e,t){if(null!=this.autocomplete[t]){var a=this.autocomplete[t].getPlace();null!==a.geometry&&(this.props.updateScheduler(e,"address",a.formatted_address),this.props.updateScheduler(e,"geolocation",{lat:a.geometry.location.lat(),lng:a.geometry.location.lng()}))}else console.log("Autocomplete is not loaded yet!")}},{key:"getCommonAddresses",value:function(e){var t=[];return this.props.active_ride.locations[e].address||t.push(n.a.createElement("option",{value:"",label:"",key:"null"})),this.props.active_ride.rider.id?(t.push.apply(t,Object(pe.a)(this.props.users[this.props.active_ride.rider.id].addresses.map((function(e){return n.a.createElement("option",{value:"addr_"+e.line_1,label:e.name,key:e.name})})))),t.push(n.a.createElement("option",{value:"other",label:"--Other--",key:"other"})),t):t}},{key:"vehicleOptions",value:function(){var e=[n.a.createElement("option",{value:"",label:""})];return this.props.active_ride.driver.id?(e.push.apply(e,Object(pe.a)(this.props.users[this.props.active_ride.driver.id].vehicles.map((function(e){return n.a.createElement("option",{value:e.lp,label:e.year+" "+e.make_model})})))),e):e}},{key:"render",value:function(){var e=this;return n.a.createElement(E.a,{className:"RideInformation",style:{minWidth:"100%"}},n.a.createElement("h1",null,"Ride Information"),n.a.createElement(R.a,null,n.a.createElement(D.a,null,n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",null,"Options")),n.a.createElement(f.a.Body,null,n.a.createElement(oe.a,{borderless:!0},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,"Name:"),n.a.createElement("td",null,"".concat(this.props.active_ride.rider.first_name)," ","".concat(this.props.active_ride.rider.last_name))),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Date:")),n.a.createElement("td",null,n.a.createElement(V.a.Control,{type:"date",placeholder:"",id:"sched_date",onChange:this.handleChange,value:this.props.active_ride.ride_data.date}))),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Trip Purpose:")),n.a.createElement("td",null,n.a.createElement(V.a.Control,{as:"select",placeholder:"",id:"sched_purpose",onChange:this.handleChange,value:this.props.active_ride.ride_data.purpose},["","Medical Appointments","Pharmacy","Grocery","Congregate Meal","Social Activity","Religious","Personal Care","Errands","Vet (Pet)","Gym","Restaurant"].map((function(e){return n.a.createElement("option",{label:e,value:e,key:e})}))))),n.a.createElement("tr",null,n.a.createElement("td",null,"Mobility Aid:"),n.a.createElement("td",null,this.props.users[this.props.active_ride.rider.id].accommodations.mobility_aid?"".concat(this.props.users[this.props.active_ride.rider.id].accommodations.mobility_aid):"N/A")),n.a.createElement("tr",null,n.a.createElement("td",null,"Special Accommodations:"),n.a.createElement("td",null,this.props.users[this.props.active_ride.rider.id].accommodations.special?"".concat(this.props.users[this.props.active_ride.rider.id].accommodations.special):"N/A"))))))),n.a.createElement(D.a,null,n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,"Pickup to Dropoff"),n.a.createElement(f.a.Body,null,n.a.createElement(R.a,{style:{position:"relative",width:"100%",height:"250px"}},n.a.createElement(q,null)),n.a.createElement(R.a,null,n.a.createElement(D.a,null,"Estimated Rider Trip Duration:"),n.a.createElement(D.a,null,this.props.active_ride.ride_data.time_total.rider?F()("2015-01-01").startOf("day").seconds(this.props.active_ride.ride_data.time_total.rider).format("H:mm:ss"):"")),n.a.createElement(R.a,null,n.a.createElement(D.a,null,"Based on dropoff time, pickup time should be:"),n.a.createElement(D.a,null,console.log(F()(this.props.active_ride.locations.dropoff.time)),this.props.active_ride.locations.dropoff.time?F()(this.props.active_ride.locations.dropoff.time,"HH:mm").subtract(this.props.active_ride.ride_data.time_total.rider,"second").format("hh:mm:ss A"):"")))))),n.a.createElement("br",null),n.a.createElement(R.a,null,n.a.createElement(D.a,null,n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",null,"Pickup")),n.a.createElement(f.a.Body,null,n.a.createElement(oe.a,{borderless:!0},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Address:")),n.a.createElement("td",null,n.a.createElement(V.a.Control,{as:"select",id:"sched_pickup_address",onChange:function(t){return e.handleCommonAddress(t,"pickup")},value:this.props.active_ride.ride_data.meta.pickup_CA},this.getCommonAddresses("pickup")))),n.a.createElement("tr",null,n.a.createElement("td",null),n.a.createElement("td",null,n.a.createElement($.a,{onLoad:this.onLoad,onPlaceChanged:function(){return e.onPlaceChanged("pickup",0)}},n.a.createElement(V.a.Control,{type:"text",placeholder:"Pickup Location",disabled:"other"!==this.props.active_ride.ride_data.meta.pickup_CA,id:"sched_pickup_address",onChange:this.handleChange,value:this.props.active_ride.locations.pickup.address})))),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Time:")),n.a.createElement("td",null,n.a.createElement(V.a.Control,{type:"time",id:"sched_pickup_time",onChange:function(t){return e.handleChange(t)},value:this.props.active_ride.locations.pickup.time}))),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Special Instructions:")),n.a.createElement("td",null,n.a.createElement(V.a.Control,{type:"text",placeholder:"Pickup Instructions",id:"sched_pickup_special",onChange:this.handleChange,value:this.props.active_ride.locations.pickup.special})))))))),n.a.createElement(D.a,null,n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",null,"Dropoff")),n.a.createElement(f.a.Body,null,n.a.createElement(oe.a,{borderless:!0},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Address:")),n.a.createElement("td",null,n.a.createElement(V.a.Control,{as:"select",id:"sched_dropoff_address",onChange:function(t){return e.handleCommonAddress(t,"dropoff")},value:this.props.active_ride.ride_data.meta.dropbox_CA},this.getCommonAddresses("dropoff")))),n.a.createElement("tr",null,n.a.createElement("td",null),n.a.createElement("td",null,n.a.createElement($.a,{onLoad:this.onLoad,onPlaceChanged:function(){return e.onPlaceChanged("dropoff",1)}},n.a.createElement(V.a.Control,{type:"text",placeholder:"Dropoff Location",id:"sched_dropoff_address",onChange:this.handleChange,disabled:"other"!==this.props.active_ride.ride_data.meta.dropoff_CA,value:this.props.active_ride.locations.dropoff.address})))),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Time:")),n.a.createElement("td",null,n.a.createElement(V.a.Control,{type:"time",id:"sched_dropoff_time",onChange:function(t){return e.handleChange(t)},value:this.props.active_ride.locations.dropoff.time}))),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Special Instructions:")),n.a.createElement("td",null,n.a.createElement(V.a.Control,{type:"text",placeholder:"Dropoff Instructions",id:"sched_dropoff_special",onChange:this.handleChange,value:this.props.active_ride.locations.dropoff.special}))))))))),n.a.createElement("br",null))}}]),t}(r.Component),he=Object(p.b)((function(e){return{active_ride:e.active_ride,users:e.users}}),(function(e){return{updateScheduler:function(t,a,r){return e({type:"scheduler",payload:{type:t,field:a,value:r}})}}}))(me),ve=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={search_term:""},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){"search"===e.target.id?this.setState({search_term:e.target.value}):"sched_vehicle"===e.target.id&&this.props.updateScheduler("vehicle",this.props.active_ride.driver.id,e.target.value)}},{key:"vehicleOptions",value:function(){var e,t=[n.a.createElement("option",{value:"",label:"",key:"null"})];return this.props.active_ride.driver.id?(this.props.active_ride.driver.vehicle.lp&&(t=[]),(e=t).push.apply(e,Object(pe.a)(this.props.users[this.props.active_ride.driver.id].vehicles.map((function(e){return n.a.createElement("option",{key:e.lp,value:e.lp,label:e.year+" "+e.make_model})})))),t):t}},{key:"render",value:function(){return n.a.createElement(E.a,{className:"SelectDriver",style:{minWidth:"100%"}},n.a.createElement("h1",null,"Select Driver"),n.a.createElement(V.a,null,n.a.createElement(V.a.Group,{as:R.a},n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{type:"search",id:"search",placeholder:"Search Drivers",onChange:this.handleChange})))),n.a.createElement("hr",null),n.a.createElement(R.a,{style:{height:"30%"}},n.a.createElement(ce,{search_term:this.state.search_term,mode:"driver"})),n.a.createElement("hr",null),n.a.createElement(R.a,null,n.a.createElement(D.a,null,n.a.createElement("div",{style:{position:"relative",width:"100%",height:"250px"}},n.a.createElement(q,null))),n.a.createElement(D.a,null,n.a.createElement(R.a,null,n.a.createElement(D.a,null,"Driver:"),n.a.createElement(D.a,null,"".concat(this.props.active_ride.driver.first_name)," ","".concat(this.props.active_ride.driver.last_name))),n.a.createElement(R.a,null,n.a.createElement(D.a,null,"Select Vehicle:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{as:"select",id:"sched_vehicle",onChange:this.handleChange,value:this.props.active_ride.driver.vehicle.lp?this.props.active_ride.driver.vehicle.lp:""},this.vehicleOptions()))),n.a.createElement(R.a,null,n.a.createElement(D.a,null,"Trip Duration:"),n.a.createElement(D.a,null,this.props.active_ride.ride_data.time_total.driver?F()("2015-01-01").startOf("day").seconds(this.props.active_ride.ride_data.time_total.driver).format("H [hours] mm [minutes]"):"")))))}}]),t}(r.Component),ge=Object(p.b)((function(e){return{active_ride:e.active_ride,users:e.users}}),(function(e){return{updateScheduler:function(t,a,r){return e({type:"scheduler",payload:{type:t,field:a,value:r}})}}}))(ve),Ee=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){}},{key:"render",value:function(){return n.a.createElement(E.a,null,n.a.createElement(R.a,null,n.a.createElement(D.a,null,n.a.createElement(q,null,"Trip Summary")),n.a.createElement(D.a,null,n.a.createElement(oe.a,null,n.a.createElement("tr",null,n.a.createElement("td",null,"Name:"),n.a.createElement("td",null,"".concat(this.props.active_ride.rider.first_name)," ","".concat(this.props.active_ride.rider.last_name))),n.a.createElement("tr",null,n.a.createElement("td",null,"Pickup Location:"),n.a.createElement("td",null,this.props.active_ride.locations.pickup.address)),n.a.createElement("tr",null,n.a.createElement("td",null,"Pickup Time:"),n.a.createElement("td",null,F()(this.props.active_ride.locations.pickup.time,"HH:mm").format("hh:mm a"))),n.a.createElement("tr",null,n.a.createElement("td",null,"Dropoff Location:"),n.a.createElement("td",null,this.props.active_ride.locations.dropoff.address)),n.a.createElement("tr",null,n.a.createElement("td",null,"Dropoff Time:"),n.a.createElement("td",null,F()(this.props.active_ride.locations.dropoff.time,"HH:mm").format("hh:mm a"))),n.a.createElement("tr",null,n.a.createElement("td",null,"Driver Trip Duration:"),n.a.createElement("td",null,this.props.active_ride.ride_data.time_total.driver?F()("2015-01-01").startOf("day").seconds(this.props.active_ride.ride_data.time_total.driver).format("H [hours] mm [minutes]"):"")),n.a.createElement("tr",null,n.a.createElement("td",null,"Driver:"),n.a.createElement("td",null,this.props.active_ride.driver.first_name," ",this.props.active_ride.driver.last_name))))))}}]),t}(r.Component),fe=Object(p.b)((function(e){return{active_ride:e.active_ride}}),(function(e){return{}}))(Ee),_e=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={scheduler_page:0,error_message:""},a.handleSubmit=a.handleSubmit.bind(Object(I.a)(a)),a.validate=a.validate.bind(Object(I.a)(a)),a.props.clearRide(),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(){var e=this;if(window.confirm("Are you sure you want to schedule this ride for "+this.props.active_ride.rider.first_name+" "+this.props.active_ride.rider.last_name+" on "+this.props.active_ride.ride_data.date)){switch(this.props.users[this.props.active_ride.driver.id].personal_info.preferred_communication){case"email":break;case"mobile":this.props.active_ride.ride_data.driver_confirmed=window.confirm("Call this number to confirm: "+this.props.users[this.props.active_ride.driver.id].personal_info.phone_mobile+". Did they confirm?");break;case"home":this.props.active_ride.ride_data.driver_confirmed=window.confirm("Call this number to confirm: "+this.props.users[this.props.active_ride.driver.id].personal_info.phone_home+". Did they confirm?")}g.a.post(b+"/database/rides/ride",{ride:this.props.active_ride},{headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(t){e.props.addRide(e.props.active_ride,t.data.id),!1===e.props.active_ride.ride_data.meta.return&&window.confirm("Would you like to schedule a return ride for "+e.props.active_ride.rider.first_name+" "+e.props.active_ride.rider.last_name+" on "+e.props.active_ride.ride_data.date)?(e.props.returnRide(),e.setState({scheduler_page:1})):(e.props.clearRide(),e.props.history.push("/Dashboard"))}))}}},{key:"changePage",value:function(e){if(e<=0||this.validate()){var t=this.state.scheduler_page+e;t<0&&(t=0),t>3&&(t=3),this.setState({scheduler_page:t,error_message:""})}else document.body.scrollTop=0,document.documentElement.scrollTop=0}},{key:"showPage",value:function(){switch(this.state.scheduler_page){case 0:return n.a.createElement(ue,null);case 1:return n.a.createElement(he,null);case 2:return n.a.createElement(ge,null);case 3:return n.a.createElement(fe,null);default:return n.a.createElement(ue,null)}}},{key:"validate",value:function(){switch(this.state.scheduler_page){case 0:return""!==this.props.active_ride.rider.id||(this.setState({error_message:"Please select a rider."}),!1);case 1:var e=F()(this.props.active_ride.ride_data.date,"YYYY-MM-DD");return""===this.props.active_ride.ride_data.date?(this.setState({error_message:"INVALID DATE: Please provide a date."}),!1):e.isBefore(F()().add("1","week"))?(this.setState({error_message:"INVALID DATE: Rides must be scheduled at least one (1) week in advance."}),!1):e.isAfter(F()().add("4","week"))?(this.setState({error_message:"INVALID DATE: Rides must be scheduled no more than four (4) weeks in advance."}),!1):this.props.active_ride.locations.pickup.geolocation?this.props.active_ride.locations.dropoff.geolocation?this.props.active_ride.locations.pickup.time?!(!this.props.active_ride.locations.dropoff.time||F()(this.props.active_ride.locations.dropoff.time,"HH:mm").isBefore(F()(this.props.active_ride.locations.pickup.time,"HH:mm")))||(this.setState({error_message:"INVALID DROPOFF TIME: Please provide dropoff time."}),!1):(this.setState({error_message:"INVALID PICKUP TIME: Please provide pickup time."}),!1):(this.setState({error_message:"INVALID DROPOFF ADDRESS: Please provide dropoff address."}),!1):(this.setState({error_message:"INVALID PICKUP ADDRESS: Please provide pickup address."}),!1);case 2:return""===this.props.active_ride.driver.id?(this.setState({error_message:"INVALID DATE: Please select a driver."}),!1):!!this.props.active_ride.driver.vehicle.make_model||(this.setState({error_message:"INVALID VEHICLE: Please select a vehicle."}),!1);case 3:default:return!1}}},{key:"render",value:function(){var e=this;return n.a.createElement(E.a,{style:{minWidth:"100%"}},this.state.error_message?n.a.createElement(T.a,{variant:"danger"},this.state.error_message):null,this.showPage(),n.a.createElement(R.a,{style:{textAlign:"center",position:"fixed",left:"0",bottom:"0",height:"60px",width:"100%"}},n.a.createElement(D.a,null),n.a.createElement(D.a,null,0!==this.state.scheduler_page?n.a.createElement(S.a,{variant:"dark",disabled:0===this.state.scheduler_page,size:"lg",id:"prev_button",onClick:function(){e.changePage(-1)}},"PREV"):null),n.a.createElement(D.a,null,3===this.state.scheduler_page?n.a.createElement(S.a,{disabled:3!==this.state.scheduler_page,size:"lg",id:"sched_submit_button",onClick:function(){e.handleSubmit()}},"Submit Ride"):null),n.a.createElement(D.a,null,3!==this.state.scheduler_page?n.a.createElement(S.a,{variant:"dark",size:"lg",id:"next_button",onClick:function(){e.changePage(1)}},"NEXT"):null),n.a.createElement(D.a,null)))}}]),t}(r.Component),ye=Object(p.b)((function(e){return{active_ride:e.active_ride,users:e.users}}),(function(e){return{addRide:function(t,a){return e({type:"add_ride",payload:Object(P.a)({},t,{id:a})})},clearRide:function(){return e({type:"clear_active_ride",payload:null})},returnRide:function(){return e({type:"setup_return_ride",payload:null})}}}))(_e),be=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={search_term:""},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({search_term:e.target.value})}},{key:"render",value:function(){var e=this;return n.a.createElement(E.a,{style:{minWidth:"100%"}},n.a.createElement(R.a,null,n.a.createElement(D.a,{sm:4},n.a.createElement(V.a.Control,{type:"search",id:"search",placeholder:"Search",onChange:this.handleChange})),n.a.createElement(D.a,{sm:1}),n.a.createElement(D.a,{sm:5}),n.a.createElement(D.a,{sm:2},n.a.createElement(S.a,{id:"register_button",onClick:function(){e.props.clearRegistration(),e.props.history.push("/Profiles/Register")}},"Register"))),n.a.createElement("hr",null),n.a.createElement(R.a,null,n.a.createElement(D.a,null,n.a.createElement(ce,{search_term:this.state.search_term,mode:"all"}))))}}]),t}(r.Component),Ce=Object(p.b)((function(e){return{}}),(function(e){return{clearRegistration:function(){return e({type:"clear_active_profile",payload:null})}}}))(be),ke=(a(129),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={autocomplete_help:{}},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a.autocomplete={},a.onLoad=a.onLoad.bind(Object(I.a)(a)),a.onPlaceChanged=a.onPlaceChanged.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=e.target.id.split("|")[0].replace("addr_",""),a=e.target.id.split("|")[1];switch(a){case"autocomplete":this.props.updateRegistration("addresses",t+"|autocomplete",e.target.value);break;default:this.props.updateRegistration("addresses",t+"|"+a,e.target.value)}}},{key:"onLoad",value:function(e,t){this.autocomplete[t]=e}},{key:"onPlaceChanged",value:function(e){var t=0;if(null!=this.autocomplete[e]){e-=1;var a=this.autocomplete[e+1].getPlace();this.props.updateRegistration("addresses",e+"|autocomplete",a.formatted_address);var r=!0,n=!1,l=void 0;try{for(var i,o=a.address_components[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;s.types.includes("street_number")?(t=s.long_name,this.props.updateRegistration("addresses",e+"|street_number",s.long_name)):s.types.includes("route")?this.props.updateRegistration("addresses",e+"|line_1","".concat(t," ").concat(s.short_name)):s.types.includes("locality")?this.props.updateRegistration("addresses",e+"|city",s.short_name):s.types.includes("administrative_area_level_1")?this.props.updateRegistration("addresses",e+"|state",s.short_name):s.types.includes("postal_code")&&this.props.updateRegistration("addresses",e+"|zip",s.short_name)}}catch(c){n=!0,l=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw l}}a.geometry.location&&(this.props.updateRegistration("addresses",e+"|lat",a.geometry.location.lat()),this.props.updateRegistration("addresses",e+"|lng",a.geometry.location.lng()))}else console.log("Autocomplete is not loaded yet!")}},{key:"generateAddressForms",value:function(){var e=this,t=[],a=0;for(var r in 0===this.props.addresses.length&&t.push(n.a.createElement("br",{key:"break"})),this.props.addresses)t.push(n.a.createElement(f.a.Body,{key:a},n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:2,lg:2},"Address Name:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"addr_"+a+"|name",placeholder:"--Address Name--",onChange:this.handleChange,value:this.props.addresses[a].name})),n.a.createElement(D.a,{sm:3,lg:2},"rider"===this.props.mode?n.a.createElement(S.a,{id:a,variant:"danger",onClick:function(t){return e.props.removeAddress(t.target.id)}},"Remove Address"):null)),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:2,lg:2},n.a.createElement("strong",null,"Address Search:")),n.a.createElement(D.a,null,n.a.createElement($.a,{onLoad:function(t){e.onLoad(t,a)},onPlaceChanged:function(){return e.onPlaceChanged(a)}},n.a.createElement(V.a.Control,{id:"addr_"+a+"|autocomplete",placeholder:"--Address--",onChange:this.handleChange,value:this.props.addresses[a].autocomplete})))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:2,lg:2},"Address Line 1:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"addr_"+a+"|line_1",readOnly:!0,placeholder:"--Primary Address Information--",onChange:this.handleChange,value:this.props.addresses[a].line_1})),n.a.createElement(V.a.Label,{column:!0,sm:2,lg:2},"Address Line 2:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"addr_"+a+"|line_2",placeholder:"--Unit/Care Of/Attention--",onChange:this.handleChange,value:this.props.addresses[a].line_2}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:2,lg:2},"City:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"addr_"+a+"|city",placeholder:"--City--",readOnly:!0,onChange:this.handleChange,value:this.props.addresses[a].city})),n.a.createElement(V.a.Label,{column:!0,sm:2,lg:2},"State:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"addr_"+a+"|state",placeholder:"--State--",readOnly:!0,onChange:this.handleChange,value:this.props.addresses[a].state})),n.a.createElement(V.a.Label,{column:!0,sm:2,lg:2},"Zip:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"addr_"+a+"|zip",placeholder:"--ZIP--",readOnly:!0,onChange:this.handleChange,value:this.props.addresses[a].zip}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:2,lg:2},"Special Instructions:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{as:"textarea",rows:5,id:"addr_"+a+"|special_instructions",placeholder:"Please include any additional information that a driver would need to know when picking up or dropping off from this location.",onChange:this.handleChange,value:this.props.addresses[a].special_instructions}))))),a!==this.props.addresses.length-1&&t.push(n.a.createElement("hr",{key:a+"_break"})),a++;return t}},{key:"render",value:function(){var e=this;return n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,"rider"===this.props.mode?n.a.createElement("h5",{style:{float:"left"}},"Common Addresses"):n.a.createElement("h5",{style:{float:"left"}},"Address"),"rider"===this.props.mode?n.a.createElement(S.a,{variant:"dark",style:{float:"right"},onClick:function(){return e.props.addAddress()}},"Add Address"):null),this.generateAddressForms(),n.a.createElement("h6",null," "))}}]),t}(r.Component)),Oe=Object(p.b)((function(e){return{addresses:e.active_profile.addresses,user_type:e.active_profile.user_type}}),(function(e){return{updateRegistration:function(t,a,r){return e({type:"registration",payload:{type:t,id:a,value:r}})},addAddress:function(){return e({type:"registration",payload:{type:null,id:"add_address",value:null}})},removeAddress:function(t){return e({type:"registration",payload:{type:null,id:"remove_address",value:t}})},triggerUpdate:function(){return e({type:"trigger_update",payload:null})}}}))(ke),we=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){e.target.id,this.props.updateRegistration("emergency_contact",e.target.id.replace("reg_",""),e.target.value)}},{key:"render",value:function(){return n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",{style:{float:"left"}},"Emergency Contact")),n.a.createElement(f.a.Body,null,n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"First Name:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_first_name",placeholder:"First Name",onChange:this.handleChange,value:this.props.emergency_contact.first_name}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Last Name:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_last_name",placeholder:"Last Name",onChange:this.handleChange,value:this.props.emergency_contact.last_name}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Email:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_email",placeholder:"Email Address",onChange:this.handleChange,value:this.props.emergency_contact.email}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Mobile Phone:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_phone_mobile",placeholder:"Mobile Phone",onChange:this.handleChange,value:this.props.emergency_contact.phone_mobile}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Home Phone:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_phone_home",placeholder:"Home Phone",onChange:this.handleChange,value:this.props.emergency_contact.phone_home}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Communication Preference:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{as:"select",id:"reg_preferred_communication",onChange:this.handleChange,value:this.props.emergency_contact.preferred_communication},n.a.createElement("option",{value:"",label:""}),n.a.createElement("option",{value:"email",label:"Email"}),n.a.createElement("option",{value:"mobile",label:"Mobile Phone"}),n.a.createElement("option",{value:"home",label:"Home Phone"})))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Relationship:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_relationship",placeholder:"Relationship",onChange:this.handleChange,value:this.props.emergency_contact.relationship})))))}}]),t}(r.Component),je=Object(p.b)((function(e){return{emergency_contact:e.active_profile.emergency_contact,user_type:e.active_profile.user_type}}),(function(e){return{updateRegistration:function(t,a,r){return e({type:"registration",payload:{type:t,id:a,value:r}})}}}))(we),Ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.village_id||this.props.updateRegistration("personal_info","primary_village_id",this.props.operator_village)}},{key:"handleChange",value:function(e){switch(e.target.id){case"reg_language":this.props.updateRegistration("personal_info",e.target.id.replace("reg_",""),Array.from(e.target.selectedOptions).map((function(e){return e.value})));break;case"reg_primary_village_id":default:this.props.updateRegistration("personal_info",e.target.id.replace("reg_",""),e.target.value)}}},{key:"villageOptions",value:function(){var e=this;return Object.keys(this.props.villages).map((function(t){return n.a.createElement("option",{key:e.props.villages[t].id,value:e.props.villages[t].id,label:e.props.villages[t].village_name})}))}},{key:"render",value:function(){return n.a.createElement("div",null,this.props.partial?null:n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,null,n.a.createElement(f.a.Body,null,n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Account Type:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{as:"select",id:"reg_user_type",onChange:this.handleChange,value:this.props.user_type},n.a.createElement("option",{value:"",label:""}),n.a.createElement("option",{value:"rider",label:"Rider"}),n.a.createElement("option",{value:"driver",label:"Driver"})))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Village Membership:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{as:"select",id:"reg_primary_village_id",onChange:this.handleChange,value:this.props.village_id},this.villageOptions()))))),n.a.createElement("br",null)),n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",{style:{float:"left"}},"General Information")),n.a.createElement(f.a.Body,null,n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"First Name:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_first_name",placeholder:"--First Name--",onChange:this.handleChange,value:this.props.personal_info.first_name}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Last Name:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_last_name",placeholder:"--Last Name--",onChange:this.handleChange,value:this.props.personal_info.last_name}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Communication Preference:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{as:"select",id:"reg_preferred_communication",onChange:this.handleChange,value:this.props.personal_info.preferred_communication},n.a.createElement("option",{value:"",label:""}),n.a.createElement("option",{value:"email",label:"Email"}),n.a.createElement("option",{value:"mobile",label:"Mobile Phone"}),n.a.createElement("option",{value:"home",label:"Home Phone"})))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Email:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_email",placeholder:"--Email Address--",onChange:this.handleChange,value:this.props.personal_info.email}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Mobile Phone:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_phone_mobile",placeholder:"--Mobile Phone--",onChange:this.handleChange,value:this.props.personal_info.phone_mobile}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Home Phone:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_phone_home",placeholder:"--Home Phone--",onChange:this.handleChange,value:this.props.personal_info.phone_home}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Preferred Language:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{multiple:!0,as:"select",id:"reg_language",onChange:this.handleChange,value:this.props.personal_info.language},n.a.createElement("option",{value:"english",label:"English"}),n.a.createElement("option",{value:"spanish",label:"Spanish"}),n.a.createElement("option",{value:"french",label:"French"}),n.a.createElement("option",{value:"italian",label:"Italian"}),n.a.createElement("option",{value:"chinese",label:"Chinese"}),n.a.createElement("option",{value:"korean",label:"Korean"}),n.a.createElement("option",{value:"arabic",label:"Arabic"})))))))}}]),t}(r.Component),De=Object(p.b)((function(e){return{personal_info:e.active_profile.personal_info,user_type:e.active_profile.user_type,village_id:e.active_profile.primary_village_id,user_villages:e.active_profile.villages,villages:e.villages,operator_village:e.operator.village_id}}),(function(e){return{updateRegistration:function(t,a,r){return e({type:"registration",payload:{type:t,id:a,value:r}})}}}))(Ae),Se=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){e.target.id,this.props.updateRegistration("accommodations",e.target.id.replace("reg_",""),e.target.value)}},{key:"render",value:function(){return n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",{style:{float:"left"}},"Special Accommodations")),n.a.createElement(f.a.Body,null,n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Allergy Information:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_allergies",placeholder:"Ex. Cats/Dogs, Dust, Leather",onChange:this.handleChange,value:this.props.accommodations.allergies}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Mobility Aid:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_mobility_aid",placeholder:"Ex. Walker, Cane, Wheelchair",onChange:this.handleChange,value:this.props.accommodations.mobility_aid}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Smoke-Free:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{as:"select",id:"reg_smoke_preference",onChange:this.handleChange,value:this.props.accommodations.smoke_preference},n.a.createElement("option",{value:"",label:""}),n.a.createElement("option",{value:"yes",label:"Yes"}),n.a.createElement("option",{value:"no",label:"No"})))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:2,lg:2},"Special Instructions:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{as:"textarea",rows:5,id:"reg_special",placeholder:"Please provide any additional infomation that would be pertinent to a volunteer that would be driving you.",onChange:this.handleChange,value:this.props.accommodations.special})))))}}]),t}(r.Component),Ne=Object(p.b)((function(e){return{accommodations:e.active_profile.accommodations}}),(function(e){return{updateRegistration:function(t,a,r){return e({type:"registration",payload:{type:t,id:a,value:r}})}}}))(Se),Le=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){e.target.id,this.props.updateRegistration("driver_specific",e.target.id.replace("driver_",""),e.target.value)}},{key:"render",value:function(){return n.a.createElement(f.a,null,n.a.createElement(f.a.Body,null,n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:3,lg:2},"Date Vetted:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{type:"date",id:"driver_vetting",placeholder:"--Date Vetted--",onChange:this.handleChange,value:this.props.driver_specific.vetting})))))}}]),t}(r.Component),Pe=Object(p.b)((function(e){return{driver_specific:e.active_profile.driver_specific}}),(function(e){return{updateRegistration:function(t,a,r){return e({type:"registration",payload:{type:t,id:a,value:r}})}}}))(Le),Ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=e.target.id.split("|")[0].replace("car_",""),a=e.target.id.split("|")[1];this.props.updateRegistration("vehicles",t+"|"+a,e.target.value)}},{key:"generateVehicleForms",value:function(){var e=this,t=[],a=0;for(var r in 0===this.props.vehicles.length&&t.push(n.a.createElement("br",{key:"break"})),this.props.vehicles)t.push(n.a.createElement(f.a.Body,{key:a},n.a.createElement("div",{className:"reg_row"},n.a.createElement("h6",null,"Vehicle Information")),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:3,lg:2},"Vehicle Make/Model:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"car_"+a+"|make_model",placeholder:"--Make/Model--",onChange:this.handleChange,value:this.props.vehicles[a].make_model})),n.a.createElement(D.a,{sm:3,lg:2},n.a.createElement(S.a,{id:a,variant:"danger",onClick:function(t){return e.props.removeVehicle(t.target.id)}},"Remove Vehicle"))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:3,lg:2},"Vehicle Year:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{type:"number",id:"car_"+a+"|year",placeholder:"--Year--",onChange:this.handleChange,value:this.props.vehicles[a].year})),n.a.createElement(V.a.Label,{column:!0,sm:3,lg:2},"Vehicle Color:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"car_"+a+"|color",placeholder:"--Color--",onChange:this.handleChange,value:this.props.vehicles[a].color}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:3,lg:2},"License Plate:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"car_"+a+"|lp",placeholder:"--License Plate--",onChange:this.handleChange,value:this.props.vehicles[a].lp})),n.a.createElement(V.a.Label,{column:!0,sm:3,lg:2},"Number of Seats:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{type:"number",id:"car_"+a+"|seats",placeholder:"--Number of Seats--",onChange:this.handleChange,value:this.props.vehicles[a].seats}))),n.a.createElement("hr",null),n.a.createElement("div",{className:"reg_row"},n.a.createElement("h6",null,"Insurance Information")),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:3,lg:2},"Provider:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"car_"+a+"|insur_provider",placeholder:"--Insurance Provider--",onChange:this.handleChange,value:this.props.vehicles[a].insur_provider})),n.a.createElement(V.a.Label,{column:!0,sm:3,lg:2},"Policy Number:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"car_"+a+"|insur_policy",placeholder:"--Policy Number--",onChange:this.handleChange,value:this.props.vehicles[a].insur_policy}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:3,lg:2},"Insurance Expiration:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{type:"date",id:"car_"+a+"|insur_exp",placeholder:"--Expiration Date--",onChange:this.handleChange,value:this.props.vehicles[a].insur_exp})),n.a.createElement(V.a.Label,{column:!0,sm:3,lg:2},"Coverage Amount:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{type:"number",id:"car_"+a+"|insur_coverage",placeholder:"--Coverage Amount--",onChange:this.handleChange,value:this.props.vehicles[a].insur_coverage}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:3,lg:2},"Date of Last Inspection:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{type:"date",id:"car_"+a+"|insp_date",placeholder:"--Date of Previous Inspection--",onChange:this.handleChange,value:this.props.vehicles[a].insp_date}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:3,lg:2},"Additional Notes:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{as:"textarea",rows:5,id:"car_"+a+"|special",placeholder:"",onChange:this.handleChange,value:this.props.vehicles[a].special}))))),a!==this.props.vehicles.length-1&&t.push(n.a.createElement("hr",{key:a+"_break"})),a++;return t}},{key:"render",value:function(){var e=this;return n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",{style:{float:"left"}},"Vehicles"),n.a.createElement(S.a,{variant:"dark",style:{float:"right"},onClick:function(){return e.props.addVehicle()}},"Add Vehicle")),this.generateVehicleForms(),n.a.createElement("h6",null," "))}}]),t}(r.Component),Re=Object(p.b)((function(e){return{vehicles:e.active_profile.vehicles,user_type:e.active_profile.user_type}}),(function(e){return{updateRegistration:function(t,a,r){return e({type:"registration",payload:{type:t,id:a,value:r}})},addVehicle:function(){return e({type:"registration",payload:{type:null,id:"add_vehicle",value:null}})},removeVehicle:function(t){return e({type:"registration",payload:{type:null,id:"remove_vehicle",value:t}})}}}))(Ie),Ve=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=e.target.id.split("|")[0].replace("vol_",""),a=e.target.id.split("|")[1];this.props.updateRegistration("volunteer_hours",t+"|"+a,e.target.value)}},{key:"generateHourRows",value:function(){var e=this,t=[],a=String(this.props.volunteer_hours.length-1);for(var r in this.props.volunteer_hours)t.push(n.a.createElement(R.a,{className:"reg_row",key:r},n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{as:"select",id:"vol_"+r+"|day",onChange:this.handleChange,value:this.props.volunteer_hours[r].day},n.a.createElement("option",{label:"Sunday",value:0}),n.a.createElement("option",{label:"Monday",value:1}),n.a.createElement("option",{label:"Tuesday",value:2}),n.a.createElement("option",{label:"Wednesday",value:3}),n.a.createElement("option",{label:"Thursday",value:4}),n.a.createElement("option",{label:"Friday",value:5}),n.a.createElement("option",{label:"Saturday",value:6}))),n.a.createElement(V.a.Label,{column:!0,sm:2,lg:2},"Starting Time:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{type:"time",id:"vol_"+r+"|start",onChange:this.handleChange,value:this.props.volunteer_hours[r].start})),n.a.createElement(V.a.Label,{column:!0,sm:2,lg:2},"Ending Time:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{type:"time",id:"vol_"+r+"|end",onChange:this.handleChange,value:this.props.volunteer_hours[r].end})),n.a.createElement(D.a,null,n.a.createElement(S.a,{variant:"danger",onClick:function(t){return e.props.removeVolHours(t.target.id)}},"Delete")))),r!==a&&t.push(n.a.createElement("hr",{key:"break_"+r}));return t}},{key:"render",value:function(){var e=this;return n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",{style:{float:"left"}},"Volunteer Hours"),n.a.createElement(S.a,{variant:"dark",style:{float:"right"},onClick:function(){return e.props.addVolHours()}},"Add Volunteer Day")),n.a.createElement(f.a.Body,null,this.generateHourRows()),n.a.createElement("h6",null," "))}}]),t}(r.Component),Te=Object(p.b)((function(e){return{volunteer_hours:e.active_profile.volunteer_hours}}),(function(e){return{updateRegistration:function(t,a,r){return e({type:"registration",payload:{type:t,id:a,value:r}})},addVolHours:function(){return e({type:"registration",payload:{type:null,id:"add_vol_hours",value:null}})},removeVolHours:function(t){return e({type:"registration",payload:{type:null,id:"remove_vol_hours",value:t}})}}}))(Ve),He=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){e.target.id,this.props.updateRegistration("caregiver",e.target.id.replace("reg_",""),e.target.value)}},{key:"render",value:function(){return n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",{style:{float:"left"}},"Caregiver Contact")),n.a.createElement(f.a.Body,null,n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"First Name:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_first_name",placeholder:"First Name",onChange:this.handleChange,value:this.props.caregiver.first_name}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Last Name:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_last_name",placeholder:"Last Name",onChange:this.handleChange,value:this.props.caregiver.last_name}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Email:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_email",placeholder:"Email Address",onChange:this.handleChange,value:this.props.caregiver.email}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Mobile Phone:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_phone_mobile",placeholder:"Mobile Phone",onChange:this.handleChange,value:this.props.caregiver.phone_mobile}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Home Phone:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{id:"reg_phone_home",placeholder:"Home Phone",onChange:this.handleChange,value:this.props.caregiver.phone_home}))),n.a.createElement(R.a,{className:"reg_row"},n.a.createElement(V.a.Label,{column:!0,sm:4,lg:2},"Communication Preference:"),n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{as:"select",id:"reg_preferred_communication",onChange:this.handleChange,value:this.props.caregiver.preferred_communication},n.a.createElement("option",{value:"",label:""}),n.a.createElement("option",{value:"email",label:"Email"}),n.a.createElement("option",{value:"mobile",label:"Mobile Phone"}),n.a.createElement("option",{value:"home",label:"Home Phone"}))))))}}]),t}(r.Component),Me=Object(p.b)((function(e){return{caregiver:e.active_profile.caregiver,user_type:e.active_profile.user_type}}),(function(e){return{updateRegistration:function(t,a,r){return e({type:"registration",payload:{type:t,id:a,value:r}})}}}))(He),xe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={error_message:"",page:0},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a.validateRegistration=a.validateRegistration.bind(Object(I.a)(a)),a.changePage=a.changePage.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){}},{key:"changePage",value:function(e){if(e<=0||this.validateRegistration()){var t=this.state.page+e;t<0&&(t=0),"rider"===this.props.registration.user_type&&t>4?t=4:t>5&&(t=5),this.setState({page:t,error_message:""})}else document.documentElement.scrollTop=0}},{key:"generatePage",value:function(){if("driver"===this.props.registration.user_type)switch(this.state.page){case 0:return n.a.createElement(De,null);case 1:return n.a.createElement(Oe,{mode:"driver"});case 2:return n.a.createElement(je,null);case 3:return n.a.createElement(Re,null);case 4:return n.a.createElement(Te,null);case 5:return n.a.createElement(Pe,null)}else switch(this.state.page){case 0:return n.a.createElement(De,null);case 1:return n.a.createElement(Oe,{mode:"rider"});case 2:return n.a.createElement(je,null);case 3:return n.a.createElement(Me,null);case 4:return n.a.createElement(Ne,null)}}},{key:"validateEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}},{key:"validatePhoneNumber",value:function(e){return/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/.test(e)}},{key:"validateZipCode",value:function(e){return/^\d{5}$|^\d{5}-\d{4}$/.test(e)}},{key:"validateRegistration",value:function(){switch(this.state.page){case 0:if(!this.props.registration.user_type)return this.setState({error_message:"INVALID ACCOUNT TYPE: Please select an account type."}),!1;if(!this.props.registration.personal_info.first_name)return this.setState({error_message:"INVALID FIRST NAME: Please provide a first name."}),!1;if(!this.props.registration.personal_info.last_name)return this.setState({error_message:"INVALID LAST NAME: Please provide a last name."}),!1;switch(this.props.registration.personal_info.preferred_communication){case"email":if(!this.validateEmail(this.props.registration.personal_info.email))return this.setState({error_message:"INVALID EMAIL: Please provide a properly formatted email."}),!1;break;case"mobile":if(!this.validatePhoneNumber(this.props.registration.personal_info.phone_mobile))return this.setState({error_message:"INVALID MOBILE PHONE: Please provide a properly formatted mobile phone number."}),!1;break;case"home":if(!this.validatePhoneNumber(this.props.registration.personal_info.phone_home))return this.setState({error_message:"INVALID HOME PHONE: Please provide a properly formatted home phone number."}),!1;break;default:return this.setState({error_message:"INVALID COMMUNICATION PREFERENCE: Please select a form of communication."}),!1}return 0!==this.props.registration.personal_info.language.length||(this.setState({error_message:"INVALID LANGUAGE: Please provide a language."}),!1);case 1:if("rider"===this.props.registration.user_type){for(var e=new Set,t=0;t<this.props.registration.addresses.length;t++){if(e.has(this.props.registration.addresses[t].name))return this.setState({error_message:"REDUNDANT ADDRESS NAME: Please provide a unique address name."}),e.clear(),!1;if(!this.props.registration.addresses[t].name)return this.setState({error_message:"INVALID ADDRESS NAME: Please provide an address name."}),!1;if(!this.props.registration.addresses[t].line_1)return this.setState({error_message:"INVALID ADDRESS LINE 1: Please provide an address."}),!1;if(!this.props.registration.addresses[t].city)return this.setState({error_message:"INVALID CITY: Please provide a city."}),!1;if(!this.props.registration.addresses[t].state)return this.setState({error_message:"INVALID STATE: Please provide a state."}),!1;if(!this.props.registration.addresses[t].zip)return this.setState({error_message:"INVALID ZIP CODE: Please provide a zip code."}),!1;e.add(this.props.registration.addresses[t].name)}return e.clear(),!0}return"driver"===this.props.registration.user_type&&(this.props.registration.addresses[0].name?this.props.registration.addresses[0].line_1?this.props.registration.addresses[0].city?this.props.registration.addresses[0].state?!!this.validateZipCode(this.props.registration.addresses[0].zip)||(this.setState({error_message:"INVALID ZIP CODE: Please provide a zip code."}),!1):(this.setState({error_message:"INVALID STATE: Please provide a state."}),!1):(this.setState({error_message:"INVALID CITY: Please provide a city."}),!1):(this.setState({error_message:"INVALID ADDRESS LINE 1: Please provide an address."}),!1):(this.setState({error_message:"INVALID ADDRESS NAME: Please provide an address name."}),!1));case 2:if(!this.props.registration.emergency_contact.first_name)return this.setState({error_message:"INVALID FIRST NAME: Please provide a first name."}),!1;if(!this.props.registration.emergency_contact.last_name)return this.setState({error_message:"INVALID LAST NAME: Please provide a last name."}),!1;if(this.props.registration.emergency_contact.email){if(!this.validateEmail(this.props.registration.emergency_contact.email))return this.setState({error_message:"INVALID EMAIL: Please provide a properly formatted email."}),!1}else{if(!this.props.registration.emergency_contact.phone_home&&!this.props.registration.emergency_contact.phone_mobile)return this.setState({error_message:"INVALID PHONE NUMBER: Please provide a phone number."}),!1;if(this.props.registration.emergency_contact.phone_home){if(!this.validatePhoneNumber(this.props.registration.emergency_contact.phone_home))return this.setState({error_message:"INVALID HOME PHONE: Please provide a properly formatted home phone number."}),!1}else if(this.props.registration.emergency_contact.phone_mobile){if(!this.validatePhoneNumber(this.props.registration.emergency_contact.phone_mobile))return this.setState({error_message:"INVALID MOBILE PHONE: Please provide a properly formatted mobile phone number."}),!1}else if(!this.props.registration.emergency_contact.relationship)return this.setState({error_message:"INVALID RELATIONSHIP: Please provide a relationship."}),!1}return!0;case 3:if("rider"===this.props.registration.user_type)return!0;if("driver"===this.props.registration.user_type){for(var a=new Set,r=0;r<this.props.registration.vehicles.length;r++){if(a.has(this.props.registration.vehicles[r].lp))return this.setState({error_message:"REDUNDANT LICENSE PLATE: Please provide a unique license plate."}),a.clear(),!1;if(!this.props.registration.vehicles[r].make_model)return this.setState({error_message:"INVALID VEHICLE MAKE/MODEL: Please provide a vehicle make/model."}),!1;if(!this.props.registration.vehicles[r].year)return this.setState({error_message:"INVALID VEHICLE YEAR: Please provide a vehicle year."}),!1;if(!this.props.registration.vehicles[r].color)return this.setState({error_message:"INVALID VEHICLE YEAR: Please provide a vehicle color."}),!1;if(!this.props.registration.vehicles[r].lp)return this.setState({error_message:"INVALID LICENSE PLATE: Please provide a license plate."}),!1;if(0===this.props.registration.vehicles[r].seats)return this.setState({error_message:"INVALID SEAT NUMBER: Please provide a seat number."}),!1;if(!this.props.registration.vehicles[r].insur_provider)return this.setState({error_message:"INVALID INSURANCE PROVIDER: Please provide an insurance provider."}),!1;if(!this.props.registration.vehicles[r].insur_policy)return this.setState({error_message:"INVALID INSURANCE POLICY: Please provide an insurance policy."}),!1;if(!this.props.registration.vehicles[r].insur_exp)return this.setState({error_message:"INVALID INSURANCE EXPIRATION DATE: Please provide an insurance expiration date."}),!1;if(!this.props.registration.vehicles[r].insur_coverage)return this.setState({error_message:"INVALID INSURANCE COVERAGE: Please provide insurance coverage."}),!1;if(!this.props.registration.vehicles[r].insp_date)return this.setState({error_message:"INVALID INSPECTION DATE: Please provide an inspection date."}),!1;a.add(this.props.registration.vehicles[r].lp)}return a.clear(),!0}return!1;case 4:if("rider"===this.props.registration.user_type)return!!this.props.registration.accommodations.smoke_preference||(this.setState({error_message:"INVALID SMOKE PREFERENCE: Please select a smoke preference."}),!1);if("driver"===this.props.registration.user_type){for(var n=0;n<this.props.registration.volunteer_hours.length;n++)if(this.props.registration.volunteer_hours[n].start){if(!this.props.registration.volunteer_hours[n].end||F()(this.props.registration.volunteer_hours[n].start,"HH:mm").isAfter(F()(this.props.registration.volunteer_hours[n].end,"HH:mm")))return this.setState({error_message:"INVALID END TIME: Please provide an end time after start time."}),!1}else if(this.props.registration.volunteer_hours[n].end&&!this.props.registration.volunteer_hours[n].start)return this.setState({error_message:"INVALID START TIME: Please provide a start time."}),!1;return!0}return!1;case 5:return"driver"===this.props.registration.user_type&&(!!this.props.registration.driver_specific.vetting||(this.setState({error_message:"INVALID VETTING: Please provide date last vetted."}),!1));default:return!1}}},{key:"handleSubmit",value:function(){var e=this;this.validateRegistration()&&window.confirm("Are you sure you want to register this account for "+this.props.registration.personal_info.first_name+" "+this.props.registration.personal_info.last_name+"?")&&g.a.post(b+"/database/users/user",{user:this.props.registration},{headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(t){e.props.addUser(e.props.registration,t.data.id),e.props.clearRegistration(),e.props.history.push("/Profiles")}))}},{key:"render",value:function(){var e=this;return n.a.createElement(E.a,{style:{minWidth:"100%"}},this.state.error_message?n.a.createElement(T.a,{variant:"danger"},this.state.error_message):null,this.generatePage(),n.a.createElement("br",null),n.a.createElement(R.a,{style:{textAlign:"center",position:"fixed",left:"0",bottom:"0",height:"60px",width:"100%"}},n.a.createElement(D.a,null),n.a.createElement(D.a,null,n.a.createElement(S.a,{variant:"dark",size:"lg",id:"prev_button",disabled:0===this.state.page,onClick:function(){e.changePage(-1)}},"PREV")),n.a.createElement(D.a,null,n.a.createElement(S.a,{size:"lg",id:"reg_submit_button",disabled:"rider"===this.props.registration.user_type&&4!==this.state.page||"driver"===this.props.registration.user_type&&5!==this.state.page,onClick:function(){e.handleSubmit()}},"Submit")),n.a.createElement(D.a,null,n.a.createElement(S.a,{variant:"dark",size:"lg",id:"next_button",disabled:"rider"===this.props.registration.user_type&&4===this.state.page||"driver"===this.props.registration.user_type&&5===this.state.page,onClick:function(){e.changePage(1)}},"NEXT")),n.a.createElement(D.a,null)),n.a.createElement("br",null))}}]),t}(r.Component),Be=Object(p.b)((function(e){return{registration:e.active_profile}}),(function(e){return{addUser:function(t,a){return e({type:"add_user",payload:Object(P.a)({},t,{id:a})})},clearRegistration:function(){return e({type:"clear_active_profile",payload:null})}}}))(xe),Ue=a(58),Ye=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Fe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={sub_page:"general_info",mode:"view"},a.changePage=a.changePage.bind(Object(I.a)(a)),a.genSubPage=a.genSubPage.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"changePage",value:function(e){this.setState({sub_page:e})}},{key:"genSubPage",value:function(){switch(this.state.sub_page){case"general_info":if("view"===this.state.mode)return n.a.createElement(oe.a,{striped:!0,bordered:!0},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",null,"First Name"),n.a.createElement("td",null,this.props.user.personal_info.first_name)),n.a.createElement("tr",null,n.a.createElement("th",null,"Last Name"),n.a.createElement("td",null,this.props.user.personal_info.last_name)),n.a.createElement("tr",null,n.a.createElement("th",null,"Email"),n.a.createElement("td",null,this.props.user.personal_info.email)),n.a.createElement("tr",null,n.a.createElement("th",null,"Home Phone"),n.a.createElement("td",null,this.props.user.personal_info.phone_home)),n.a.createElement("tr",null,n.a.createElement("th",null,"Mobile Phone"),n.a.createElement("td",null,this.props.user.personal_info.phone_mobile)),n.a.createElement("tr",null,n.a.createElement("th",null,"Preferred Communication"),n.a.createElement("td",null,this.props.user.personal_info.preferred_communication.replace(/^\w/,(function(e){return e.toUpperCase()})))),n.a.createElement("tr",null,n.a.createElement("th",null,"Language"),n.a.createElement("td",null,this.props.user.personal_info.language.map((function(e){return e.replace(/^\w/,(function(e){return e.toUpperCase()}))+", "})))),n.a.createElement("tr",null,n.a.createElement("th",null,"Status"),n.a.createElement("td",null,this.props.user.status.replace(/^\w/,(function(e){return e.toUpperCase()}))))));if("edit"===this.state.mode)return n.a.createElement(De,{partial:!0});break;case"caregiver":if("view"===this.state.mode)return n.a.createElement(oe.a,{striped:!0,bordered:!0},this.props.user.caregiver?n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",null,"First Name"),n.a.createElement("td",null,this.props.user.caregiver.first_name)),n.a.createElement("tr",null,n.a.createElement("th",null,"Last Name"),n.a.createElement("td",null,this.props.user.caregiver.last_name)),n.a.createElement("tr",null,n.a.createElement("th",null,"Email"),n.a.createElement("td",null,this.props.user.caregiver.email)),n.a.createElement("tr",null,n.a.createElement("th",null,"Home Phone"),n.a.createElement("td",null,this.props.user.caregiver.phone_home)),n.a.createElement("tr",null,n.a.createElement("th",null,"Mobile Phone"),n.a.createElement("td",null,this.props.user.caregiver.phone_mobile)),n.a.createElement("tr",null,n.a.createElement("th",null,"Preferred Communication"),n.a.createElement("td",null,this.props.user.caregiver.preferred_communication.replace(/^\w/,(function(e){return e.toUpperCase()}))))):null);if("edit"===this.state.mode)return n.a.createElement(Me,null);break;case"emergency":if("view"===this.state.mode)return n.a.createElement(oe.a,{striped:!0,bordered:!0},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",null,"First Name"),n.a.createElement("td",null,this.props.user.emergency_contact.first_name)),n.a.createElement("tr",null,n.a.createElement("th",null,"Last Name"),n.a.createElement("td",null,this.props.user.emergency_contact.last_name)),n.a.createElement("tr",null,n.a.createElement("th",null,"Email"),n.a.createElement("td",null,this.props.user.emergency_contact.email)),n.a.createElement("tr",null,n.a.createElement("th",null,"Home Phone"),n.a.createElement("td",null,this.props.user.emergency_contact.phone_home)),n.a.createElement("tr",null,n.a.createElement("th",null,"Mobile Phone"),n.a.createElement("td",null,this.props.user.emergency_contact.phone_mobile)),n.a.createElement("tr",null,n.a.createElement("th",null,"Preferred Communcation"),n.a.createElement("td",null,this.props.user.emergency_contact.preferred_communication.replace(/^\w/,(function(e){return e.toUpperCase()}))))));if("edit"===this.state.mode)return n.a.createElement(je,null);break;case"vehicles":if("view"===this.state.mode)return this.props.user.vehicles.map((function(e){return n.a.createElement(n.a.Fragment,{key:e.lp+e.make_model},n.a.createElement(oe.a,{striped:!0,bordered:!0},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",{colSpan:"2"},e.year+" "+e.make_model)),n.a.createElement("tr",null,n.a.createElement("th",null,"Make/Model"),n.a.createElement("td",null,e.make_model)),n.a.createElement("tr",null,n.a.createElement("th",null,"Year"),n.a.createElement("td",null,e.year)),n.a.createElement("tr",null,n.a.createElement("th",null,"Color"),n.a.createElement("td",null,e.color)),n.a.createElement("tr",null,n.a.createElement("th",null,"License Plate"),n.a.createElement("td",null,e.lp)),n.a.createElement("tr",null,n.a.createElement("th",null,"Number of Seats"),n.a.createElement("td",null,e.seats)),n.a.createElement("tr",null,n.a.createElement("th",{colSpan:"2"},"Insurance")),n.a.createElement("tr",null,n.a.createElement("th",null,"Provder"),n.a.createElement("td",null,e.insur_provider)),n.a.createElement("tr",null,n.a.createElement("th",null,"Policy Number"),n.a.createElement("td",null,e.insur_policy)),n.a.createElement("tr",null,n.a.createElement("th",null,"Coverage Amount"),n.a.createElement("td",null,e.insur_coverage)),n.a.createElement("tr",null,n.a.createElement("th",null,"Insurance Expiration"),n.a.createElement("td",null,e.insur_exp)),n.a.createElement("tr",null,n.a.createElement("th",null,"Last Inspection"),n.a.createElement("td",null,e.insp_date)),n.a.createElement("tr",null,n.a.createElement("th",null,"Additional Notes"),n.a.createElement("td",null,e.special)))),n.a.createElement("hr",null))}));if("edit"===this.state.mode)return n.a.createElement(Re,null);break;case"schedule":if("view"===this.state.mode)return n.a.createElement(oe.a,{striped:!0,bordered:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Day"),n.a.createElement("th",null,"Start Time"),n.a.createElement("th",null,"End Time"))),n.a.createElement("tbody",null,this.props.user.volunteer_hours.map((function(e){return n.a.createElement("tr",{key:e.day+e.start+e.end},n.a.createElement("td",null,Ye[e.day]),n.a.createElement("td",null,e.start),n.a.createElement("td",null,e.end))}))));if("edit"===this.state.mode)return n.a.createElement(Te,null);break;case"vetting":if("view"===this.state.mode)return n.a.createElement(oe.a,{striped:!0,bordered:!0},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Vetting Date"),n.a.createElement("td",null,this.props.user.driver_specific.vetting))));if("edit"===this.state.mode)return n.a.createElement(Pe,null);break;case"addresses":if("view"===this.state.mode)return this.props.user.addresses.map((function(e){return n.a.createElement(n.a.Fragment,{key:e.name+e.line_1},n.a.createElement(oe.a,{striped:!0,bordered:!0},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",{colSpan:"2"},e.name)),n.a.createElement("tr",null,n.a.createElement("th",null,"Line 1"),n.a.createElement("td",null,e.line_1)),n.a.createElement("tr",null,n.a.createElement("th",null,"Line 2"),n.a.createElement("td",null,e.line_2)),n.a.createElement("tr",null,n.a.createElement("th",null,"City"),n.a.createElement("td",null,e.city)),n.a.createElement("tr",null,n.a.createElement("th",null,"State"),n.a.createElement("td",null,e.state)),n.a.createElement("tr",null,n.a.createElement("th",null,"Zip"),n.a.createElement("td",null,e.zip)),n.a.createElement("tr",null,n.a.createElement("th",null,"Special Instructions"),n.a.createElement("td",null,e.special_instructions)))),n.a.createElement("hr",null))}));if("edit"===this.state.mode)return n.a.createElement(Oe,null);break;case"special":if("view"===this.state.mode)return n.a.createElement(oe.a,{striped:!0,bordered:!0},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Allergies"),n.a.createElement("td",null,this.props.user.accommodations.allergies)),n.a.createElement("tr",null,n.a.createElement("th",null,"Mobility Aid"),n.a.createElement("td",null,this.props.user.accommodations.mobility_aid)),n.a.createElement("tr",null,n.a.createElement("th",null,"Smoke Free"),n.a.createElement("td",null,this.props.user.accommodations.smoke_preference.replace(/^\w/,(function(e){return e.toUpperCase()})))),n.a.createElement("tr",null,n.a.createElement("th",null,"Additional Accommodations"),n.a.createElement("td",null,this.props.user.accommodations.special))));if("edit"===this.state.mode)return n.a.createElement(Ne,null)}}},{key:"handleSave",value:function(){this.setState({mode:"view"}),this.props.updateUser(this.props.user.id)}},{key:"handleDeactivate",value:function(){if(window.confirm("Are you sure you want to DEACTIVATE this user?")){this.props.deactivateUser();var e=this.props.user.personal_info.first_name+" "+this.props.user.personal_info.last_name;window.alert("DEACTIVATED: "+e)}}},{key:"handleReactivate",value:function(){if(window.confirm("Are you sure you want to ACTIVATE this user?")){this.props.activateUser();var e=this.props.user.personal_info.first_name+" "+this.props.user.personal_info.last_name;window.alert("ACTIVATED: "+e)}}},{key:"handlePermaDelete",value:function(){if(window.confirm("Are you sure you want to DELETE this user?")){var e=this.props.user.personal_info.first_name+" "+this.props.user.personal_info.last_name;window.prompt("To delete this user please enter check value: "+e+"\n THIS OPERATION CANNOT BE UNDONE!")===e?(this.props.deleteUser(),this.props.history.push("/Profiles/"),window.alert("DELETED: "+e)):window.alert("Check value did not match, operation canceled.")}}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{style:{paddingLeft:"3%",paddingRight:"3%"}},n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",{style:{float:"left"}},this.props.user.personal_info.first_name+" "+this.props.user.personal_info.last_name),n.a.createElement("div",{style:{float:"right"}},"active"===this.props.user.status?n.a.createElement(n.a.Fragment,null,"view"===this.state.mode?n.a.createElement(S.a,{variant:"warning",style:{marginRight:"10px"},onClick:function(){return e.setState({mode:"edit"})}},"Edit"):n.a.createElement(S.a,{variant:"success",style:{marginRight:"10px"},onClick:function(){return e.handleSave()}},"Save"),n.a.createElement(S.a,{variant:"danger",onClick:function(){return e.handleDeactivate()}},"Deactivate")):n.a.createElement(n.a.Fragment,null,n.a.createElement(S.a,{variant:"warning",style:{marginRight:"10px"},onClick:function(){return e.handleReactivate()}},"Reactivate"),n.a.createElement(S.a,{variant:"danger",onClick:function(){return e.handlePermaDelete()}},"Permanently Delete")))),n.a.createElement(f.a.Body,null,n.a.createElement(R.a,null,n.a.createElement(D.a,{sm:3},n.a.createElement(Ue.a,null,n.a.createElement(Ue.a.Item,{active:"general_info"===this.state.sub_page,onClick:function(){return e.changePage("general_info")}},"General Information"),n.a.createElement(Ue.a.Item,{active:"emergency"===this.state.sub_page,onClick:function(){return e.changePage("emergency")}},"Emergency Contact"),"driver"===this.props.user.user_type?n.a.createElement(n.a.Fragment,null,n.a.createElement(Ue.a.Item,{active:"addresses"===this.state.sub_page,onClick:function(){return e.changePage("addresses")}},"Address"),n.a.createElement(Ue.a.Item,{active:"vehicles"===this.state.sub_page,onClick:function(){return e.changePage("vehicles")}},"Vehicles"),n.a.createElement(Ue.a.Item,{active:"schedule"===this.state.sub_page,onClick:function(){return e.changePage("schedule")}},"Volunteer Schedule"),n.a.createElement(Ue.a.Item,{active:"vetting"===this.state.sub_page,onClick:function(){return e.changePage("vetting")}},"Vetting")):n.a.createElement(n.a.Fragment,null,n.a.createElement(Ue.a.Item,{active:"caregiver"===this.state.sub_page,onClick:function(){return e.changePage("caregiver")}},"Caregiver Information"),n.a.createElement(Ue.a.Item,{active:"addresses"===this.state.sub_page,onClick:function(){return e.changePage("addresses")}},"Addresses"),n.a.createElement(Ue.a.Item,{active:"special"===this.state.sub_page,onClick:function(){return e.changePage("special")}},"Special Accommodations")))),n.a.createElement(D.a,null,this.genSubPage())))))}}]),t}(r.Component),ze=Object(p.b)((function(e){return{user:e.active_profile}}),(function(e){return{deactivateUser:function(){return e({type:"user_deactivate",payload:null})},activateUser:function(){return e({type:"user_activate",payload:null})},deleteUser:function(){return e({type:"user_perma_delete",payload:null})},updateUser:function(t){return e({type:"user_update",payload:t})}}}))(Fe),We=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleSelect=a.handleSelect.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleSelect",value:function(e){this.setState({selected_row:e.target.id.replace("edit","")}),this.props.setActiveRide(this.props.rides[e.target.id.replace("edit","")]),this.props.history.push("/Ledger/EditRide/")}},{key:"handleCancel",value:function(e){window.confirm("Are you sure you want to DELETE this ride?")&&(this.props.cancelRide(e),window.alert("CANCELLED: "+e))}},{key:"handleDeactivateRide",value:function(e){window.confirm("Are you sure you want to DEACTIVATE this ride?")&&(this.props.deactivateRide(e),window.alert("DEACTIVATED: "+e))}},{key:"handleReactivateRide",value:function(e){window.confirm("Are you sure you want to REACTIVATE this ride?")&&(this.props.reactivateRide(e),window.alert("REACTIVATED: "+e))}},{key:"futureButtons1",value:function(e){var t=this;return n.a.createElement("td",null,n.a.createElement(S.a,{id:e.id+"edit",variant:"primary",className:"mr-1",size:"sm",onClick:function(e){return t.handleSelect(e)}},"Edit"),n.a.createElement(S.a,{id:e.id+"deactivate",variant:"warning",className:"mr-1",size:"sm",onClick:function(){return t.handleDeactivateRide(e.id)}},"Deactivate"),n.a.createElement(S.a,{id:e.id+"cancel",variant:"danger",className:"mr-1",size:"sm",onClick:function(){return t.handleCancel(e.id)}},"Cancel"))}},{key:"futureButtons2",value:function(e){var t=this;return n.a.createElement("td",null,n.a.createElement(S.a,{id:e.id+"edit",variant:"primary",className:"mr-1",size:"sm",onClick:function(e){return t.handleSelect(e)}},"Edit"),n.a.createElement(S.a,{id:e.id+"reactivate",variant:"success",className:"mr-1",size:"sm",onClick:function(){return t.handleReactivateRide(e.id)}},"Reactivate"),n.a.createElement(S.a,{id:e.id+"cancel",variant:"danger",className:"mr-1",size:"sm",onClick:function(){return t.handleCancel(e.id)}},"Cancel"))}},{key:"passedButtons",value:function(e){var t=this;return n.a.createElement("td",null,n.a.createElement(S.a,{id:e.id+"cancel",variant:"danger",className:"mr-1",size:"sm",onClick:function(){return t.handleCancel(e.id)}},"Cancel"))}},{key:"renderTableData",value:function(){var e=this,t=this.props.rides;return Object.keys(t).map((function(a){var r,l,i=t[a].ride_data.driver_confirmed?n.a.createElement("tr",null,"D: Confirmed "):n.a.createElement("tr",null,"D: Pending "),o=F()(t[a].ride_data.date,"YYYY-MM-DD");return"inactive"===t[a].status?(r=e.futureButtons2(t[a]),l=n.a.createElement("tr",null,"Inactive")):(r=e.futureButtons1(t[a]),l=n.a.createElement("tr",null,"Active")),o.isBefore(F()().format("YYYY-MM-DD"))&&(r=e.passedButtons(t[a]),l=n.a.createElement("tr",null,"Passed")),n.a.createElement("tr",null,n.a.createElement("td",null,t[a].id),n.a.createElement("td",null,t[a].driver.first_name," ",t[a].driver.last_name),n.a.createElement("td",null,t[a].rider.first_name," ",t[a].rider.last_name),n.a.createElement("td",null,t[a].locations.pickup.address),n.a.createElement("td",null,t[a].locations.dropoff.address),n.a.createElement("td",null,t[a].ride_data.date),n.a.createElement("td",null,l,i),r)}))}},{key:"renderTableHeader",value:function(){return["Ride","Driver","Rider","Origin","Destination","Date","Status","Action"].map((function(e){return n.a.createElement("th",{key:e},e)}))}},{key:"render",value:function(){return n.a.createElement(E.a,{style:{minWidth:"100%"}},n.a.createElement(oe.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,this.renderTableHeader())),n.a.createElement("tbody",null,this.renderTableData())))}}]),t}(r.Component),Ge=Object(h.f)(Object(p.b)((function(e){return{rides:e.rides,users:e.users}}),(function(e){return{setActiveRide:function(t){return e({type:"active_ride",payload:t})},cancelRide:function(t){return e({type:"ride_cancel",payload:t})},deactivateRide:function(t){return e({type:"ride_deactivate",payload:t})},reactivateRide:function(t){return e({type:"ride_reactivate",payload:t})}}}))(We)),Ze=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={addresses:{}},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a.handleCommonAddress=a.handleCommonAddress.bind(Object(I.a)(a)),a.autocomplete={},a.count=0,a.onLoad=a.onLoad.bind(Object(I.a)(a)),a.onPlaceChanged=a.onPlaceChanged.bind(Object(I.a)(a)),console.log("HERE"),console.log(a.props.active_ride),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleBack",value:function(e){this.props.history.push("/Ledger/")}},{key:"handleSave",value:function(e){this.props.saveRide(this.props.active_ride),console.log(this.props.active_ride),window.alert("Saved!")}},{key:"handleChange",value:function(e){var t=e.target.id.split("_");"date"===t[1]?this.props.updateScheduler(t[1],null,e.target.value):"purpose"===t[1]?this.props.updateScheduler(t[1],null,e.target.value):"meta"===t[1]&&"samereturn"===t[2]?this.props.updateScheduler(t[2],null,e.target.checked):"driverconfirmed"===t[1]?(console.log(e.target),this.props.updateScheduler("driver_confirmed",null,e.target.checked)):this.props.updateScheduler(t[1],t[2],e.target.value)}},{key:"handleCommonAddress",value:function(e,t){"other"===e.target.value?this.props.updateScheduler("common_address","set|"+t,null):this.props.updateScheduler("common_address",t,this.props.active_ride.rider.id+"|"+e.target.value.replace("addr_",""))}},{key:"getSelectedItems",value:function(){for(var e=[],t=[],a=0;a<this.props.users.length;a++)if(this.props.users[a].id===this.props.active_ride.rider.id)this.props.users[a].addresses;for(var r=0;r<t.length;r++)e.push(n.a.createElement("option",{key:r,value:r},r));return e}},{key:"onLoad",value:function(e){this.autocomplete[this.count]=e,this.count+=1}},{key:"onPlaceChanged",value:function(e,t){if(null!=this.autocomplete[t]){var a=this.autocomplete[t].getPlace();this.props.updateScheduler(e,"address",a.formatted_address),this.props.updateScheduler(e,"geolocation",{lat:a.geometry.location.lat(),lng:a.geometry.location.lng()})}else console.log("Autocomplete is not loaded yet!")}},{key:"getCommonAddresses",value:function(e){var t=[];return this.props.active_ride.locations[e].address||t.push(n.a.createElement("option",{value:"",label:"",key:"null"})),this.props.active_ride.rider.id?(t.push.apply(t,Object(pe.a)(this.props.users[this.props.active_ride.rider.id].addresses.map((function(e){return n.a.createElement("option",{value:"addr_"+e.line_1,label:e.name,key:e.name})})))),t.push(n.a.createElement("option",{value:"other",label:"--Other--",key:"other"})),t):t}},{key:"vehicleOptions",value:function(){var e=[n.a.createElement("option",{value:"",label:""})];return this.props.active_ride.driver.id?(e.push.apply(e,Object(pe.a)(this.props.users[this.props.active_ride.driver.id].vehicles.map((function(e){return n.a.createElement("option",{value:e.lp,label:e.year+" "+e.make_model})})))),e):e}},{key:"render",value:function(){var e=this;return n.a.createElement(E.a,{className:"Edit Ride",style:{minWidth:"100%"}},n.a.createElement(R.a,null,n.a.createElement(D.a,{sm:2},n.a.createElement("td",null,n.a.createElement(S.a,{variant:"secondary",className:"mr-1",size:"lg",style:{marginRight:"auto"},onClick:function(t){return e.handleBack(t)}},"Back"),n.a.createElement(S.a,{variant:"primary",className:"mr-1",size:"lg",style:{marginRight:"auto"},onClick:function(t){return e.handleSave(t)}},"Save"))),n.a.createElement(D.a,{sm:8},n.a.createElement("h1",null,"Edit Ride"))),n.a.createElement(R.a,null,n.a.createElement(D.a,null,n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",null,"Options")),n.a.createElement(f.a.Body,null,n.a.createElement(oe.a,{borderless:!0},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,"Name:"),n.a.createElement("td",null,"".concat(this.props.active_ride.rider.first_name)," ","".concat(this.props.active_ride.rider.last_name))),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Date:")),n.a.createElement("td",null,n.a.createElement(V.a.Control,{type:"date",placeholder:"",id:"sched_date",onChange:this.handleChange,value:this.props.active_ride.ride_data.date}))),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Driver Confirm:")),n.a.createElement("td",null,console.log(),n.a.createElement(V.a.Control,{type:"checkbox",placeholder:"",id:"sched_driverconfirmed",onChange:this.handleChange,checked:this.props.active_ride.ride_data.driver_confirmed})))))))),n.a.createElement(D.a,null,n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,"Pickup to Dropoff"),n.a.createElement(f.a.Body,null,n.a.createElement("div",{style:{position:"relative",width:"100%",height:"250px"}},n.a.createElement(q,null)))))),n.a.createElement("br",null),n.a.createElement(R.a,null,n.a.createElement(D.a,null,n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",null,"Pickup")),n.a.createElement(f.a.Body,null,n.a.createElement(oe.a,{borderless:!0},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Address:")),n.a.createElement("td",null,n.a.createElement($.a,{onLoad:this.onLoad,onPlaceChanged:function(){return e.onPlaceChanged("pickup",0)}},n.a.createElement(V.a.Control,{type:"text",placeholder:"Pickup Location",disabled:this.props.active_ride.ride_data.meta.pickup_CA,id:"sched_pickup_address",onChange:this.handleChange,value:this.props.active_ride.locations.pickup.address})))),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Time:")),n.a.createElement("td",null,n.a.createElement(V.a.Control,{type:"time",id:"sched_pickup_time",onChange:function(t){return e.handleChange(t)},value:this.props.active_ride.locations.pickup.time}))),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Special Instructions:")),n.a.createElement("td",null,n.a.createElement(V.a.Control,{type:"text",placeholder:"Pickup Instructions",id:"sched_pickup_special",onChange:this.handleChange,value:this.props.active_ride.locations.pickup.special})))))))),n.a.createElement(D.a,null,n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",null,"Dropoff")),n.a.createElement(f.a.Body,null,n.a.createElement(oe.a,{borderless:!0},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement(V.a.Label,null,"Address:"),n.a.createElement("td",null,n.a.createElement($.a,{onLoad:this.onLoad,onPlaceChanged:function(){return e.onPlaceChanged("dropoff",1)}},n.a.createElement(V.a.Control,{type:"text",placeholder:"Dropoff Location",id:"sched_dropoff_address",onChange:this.handleChange,disabled:this.props.active_ride.ride_data.meta.dropoff_CA,value:this.props.active_ride.locations.dropoff.address})))),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Time:")),n.a.createElement("td",null,n.a.createElement(V.a.Control,{type:"time",id:"sched_dropoff_time",onChange:function(t){return e.handleChange(t)},value:this.props.active_ride.locations.dropoff.time}))),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(V.a.Label,null,"Special Instructions:")),n.a.createElement("td",null,n.a.createElement(V.a.Control,{type:"text",placeholder:"Dropoff Instructions",id:"sched_dropoff_special",onChange:this.handleChange,value:this.props.active_ride.locations.dropoff.special}))))))))),n.a.createElement("br",null))}}]),t}(r.Component),Ke=Object(h.f)(Object(p.b)((function(e){return{active_ride:e.active_ride,users:e.users}}),(function(e){return{updateScheduler:function(t,a,r){return e({type:"scheduler",payload:{type:t,field:a,value:r}})},saveRide:function(t){return e({type:"ride_save",payload:t})}}}))(Ze)),Xe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){}},{key:"render",value:function(){return n.a.createElement(E.a,{style:{minWidth:"100%"}},n.a.createElement(R.a,null,n.a.createElement(Ge,null)))}}]),t}(r.Component),$e=Object(p.b)((function(e){return{}}),(function(e){return{}}))(Xe),Je=a(358),qe=a(359),Qe=a(122),et=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"renderTableData",value:function(){var e={},t=Object.values(this.props.users).filter((function(e){return"rider"===e.user_type})),a=Object.values(this.props.rides).filter((function(e){return F()(e.ride_data.date,"YYYY-MM-DD").isBefore(F()())})),r=!0,l=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value,d=!0,u=!1,p=void 0;try{for(var m,h=a[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var v=m.value;-1===Object.keys(e).indexOf(c.id)&&(e[c.id]={},e[c.id].rides=0,e[c.id].mileage=0,e[c.id].village_id=c.primary_village_id),v.rider.id===c.id&&(e[c.id].rides+=1,e[c.id].mileage+=v.ride_data.mileage.rider?v.ride_data.mileage.rider:0)}}catch(g){u=!0,p=g}finally{try{d||null==h.return||h.return()}finally{if(u)throw p}}}}catch(g){l=!0,i=g}finally{try{r||null==s.return||s.return()}finally{if(l)throw i}}return t.map((function(t){return t.id in e?n.a.createElement("tr",{key:t.id,style:{display:"table",tableLayout:"fixed",width:"100%"}},n.a.createElement("td",null,t.id),n.a.createElement("td",null,t.personal_info.first_name," ",t.personal_info.last_name),n.a.createElement("td",null,e[t.id].rides),n.a.createElement("td",null),n.a.createElement("td",null,e[t.id].village_id)):null}))}},{key:"renderTableHeader",value:function(){return["Rider Id","Rider","Rides","Mileage","Village"].map((function(e){return n.a.createElement("th",{key:e},e)}))}},{key:"handleChange",value:function(e){}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(oe.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",{style:{display:"table",width:"calc( 100% - 17px )"}},n.a.createElement("tr",{style:{display:"table",tableLayout:"fixed",width:"100%"}},this.renderTableHeader())),n.a.createElement("tbody",{style:{display:"block",height:"400px",width:"100%",overflow:"auto"}},this.renderTableData())))}}]),t}(r.Component),tt=Object(p.b)((function(e){return{rides:e.rides,users:e.users}}),(function(e){return{}}))(et),at=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"renderTableData",value:function(){var e={},t=Object.values(this.props.users).filter((function(e){return"driver"===e.user_type})),a=Object.values(this.props.rides).filter((function(e){return F()(e.ride_data.date,"YYYY-MM-DD").isBefore(F()())})),r=!0,l=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value,d=!0,u=!1,p=void 0;try{for(var m,h=a[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var v=m.value;-1===Object.keys(e).indexOf(c.id)&&(e[c.id]={},e[c.id].rides=0,e[c.id].mileage=0,e[c.id].time=0),v.driver.id===c.id&&(e[c.id].rides+=1,e[c.id].mileage+=v.ride_data.mileage.driver?v.ride_data.mileage.driver:0,e[c.id].time+=v.ride_data.time_total.driver?v.ride_data.time_total.driver:0)}}catch(g){u=!0,p=g}finally{try{d||null==h.return||h.return()}finally{if(u)throw p}}}}catch(g){l=!0,i=g}finally{try{r||null==s.return||s.return()}finally{if(l)throw i}}return t.map((function(t){return t.id in e?n.a.createElement("tr",{key:t.id,style:{display:"table",tableLayout:"fixed",width:"100%"}},n.a.createElement("td",null,t.id),n.a.createElement("td",null,t.personal_info.first_name," ",t.personal_info.last_name),n.a.createElement("td",null,e[t.id].rides),n.a.createElement("td",null,e[t.id].mileage.toFixed(2)),n.a.createElement("td",null,F()("2015-01-01").startOf("day").seconds(e[t.id].time).format("H [hours] mm [minutes]"))):null}))}},{key:"renderTableHeader",value:function(){return["Driver Id","Driver","Rides","Mileage","Volunteer Hours"].map((function(e){return n.a.createElement("th",{key:e},e)}))}},{key:"handleChange",value:function(e){}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(oe.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",{style:{display:"table",width:"calc( 100% - 17px )"}},n.a.createElement("tr",{style:{display:"table",tableLayout:"fixed",width:"100%"}},this.renderTableHeader())),n.a.createElement("tbody",{style:{display:"block",height:"400px",width:"100%",overflow:"auto"}},this.renderTableData())))}}]),t}(r.Component),rt=Object(p.b)((function(e){return{rides:e.rides,users:e.users}}),(function(e){return{}}))(at),nt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){}},{key:"render",value:function(){return n.a.createElement(E.a,{style:{minWidth:"100%"}},n.a.createElement(R.a,null,n.a.createElement(D.a,{style:{maxwidth:"50%"}},n.a.createElement(f.a,null,n.a.createElement(f.a.Header,{as:"th"},"Choose the Type of Report"),n.a.createElement(f.a.Body,{className:"text-left"},n.a.createElement(V.a.Group,{as:R.a},n.a.createElement(D.a,{sm:10},n.a.createElement(V.a.Check,{type:"radio",label:"Mileage",name:"formReportType",id:"formReportTypeMileage"})))))),n.a.createElement(D.a,{style:{maxwidth:"50%"}},n.a.createElement(f.a,null,n.a.createElement(f.a.Header,{as:"th"},"Enter Time Frame (Leave Blank for Entire History)"),n.a.createElement(f.a.Body,{className:"text-left"},"Start Date (Inclusive):",n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{type:"date",id:"start_date"})),"End Date (Inclusive):",n.a.createElement(D.a,null,n.a.createElement(V.a.Control,{type:"date",id:"end_date"})))))),n.a.createElement("br",null),n.a.createElement(R.a,null,n.a.createElement(D.a,null,n.a.createElement(f.a,null,n.a.createElement(f.a.Header,{as:"th"},"Select a Person"),n.a.createElement(f.a.Body,{className:"text-left"},n.a.createElement(V.a.Group,{as:R.a},n.a.createElement(D.a,null,n.a.createElement(V.a.Check,{type:"radio",label:"Select All",name:"formReportPeople",id:"formReportPeopleSA"}),n.a.createElement(V.a.Check,{type:"radio",label:n.a.createElement(ce,{mode:"driver"}),name:"formReportPeople",id:"formReportPeopleIndividual"}))))))))}}]),t}(r.Component),lt=Object(p.b)((function(e){return{}}),(function(e){return{}}))(nt),it=a(23),ot=new Date,st=it.d.create({page:{flexDirection:"col",backgroundColor:"#E4E4E4",width:3600,margin:"20px","@media orientation: landscape":{width:3600}},table:{display:"table",width:"90%",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0},tableRow:{margin:"auto",flexDirection:"row"},tableCol:{width:"20%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCell:{margin:"auto",marginTop:5,fontSize:10}}),ct=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={total_miles:0,total_time:0},a.generateRows=a.generateRows.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"generateRows",value:function(){var e=this,t=Object.keys(this.props.rides),a=0,r=0,l=0,i=t.filter((function(t){return e.props.rides[t].driver.id===e.props.driver.id})).map((function(t){return a+=1,r+=e.props.rides[t].ride_data.time_total.driver,l+=e.props.rides[t].ride_data.mileage.driver,n.a.createElement(it.f,{style:st.tableRow},n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell},a)),n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell},e.props.rides[t].id)),n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell},e.props.rides[t].ride_data.date)),n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell},(e.props.rides[t].ride_data.time_total.driver/60).toFixed(2))),n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell},e.props.rides[t].ride_data.mileage.driver.toFixed(2))))}));return this.state.total_time===r&&this.state.total_miles===l||this.setState({total_time:r,total_miles:l}),i}},{key:"generateRideTable",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(it.f,{style:st.table},n.a.createElement(it.f,{style:st.tableRow},n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell},"Item Number")),n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell},"Ride ID")),n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell},"Trip Date")),n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell},"Trip Time")),n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell},"Trip Mileage"))),n.a.createElement(it.f,null,this.generateRows())),n.a.createElement(it.f,null,n.a.createElement(it.e,null," ")),n.a.createElement(it.f,null,n.a.createElement(it.e,null,"Totals:")),n.a.createElement(it.f,{style:st.table},n.a.createElement(it.f,{style:st.tableRow},n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell})),n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell})),n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell})),n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell},(this.state.total_time/60).toFixed(2))),n.a.createElement(it.f,{style:st.tableCol},n.a.createElement(it.e,{style:st.tableCell},this.state.total_miles.toFixed(2))))))}},{key:"render",value:function(){return n.a.createElement(it.a,{title:this.props.driver.personal_info.last_name+" Mileage Report: "+ot.getDate()+(ot.getMonth()+1)+ot.getFullYear(),author:"AGS Village Valet",creator:"AGS Village Valet"},n.a.createElement(it.c,{size:"A4",style:st.page},n.a.createElement(it.f,null,n.a.createElement(it.e,null,"AGS Village Valet - Mileage Report")),n.a.createElement(it.f,null,n.a.createElement(it.e,null," ")),n.a.createElement(it.f,null,n.a.createElement(it.e,null,this.props.driver.personal_info.last_name+", "+this.props.driver.personal_info.first_name),n.a.createElement(it.e,null,this.props.driver.addresses[0].line_1),n.a.createElement(it.e,null,this.props.driver.addresses[0].city+", "+this.props.driver.addresses[0].state+" "+this.props.driver.addresses[0].zip),n.a.createElement(it.e,null,(this.props.driver.personal_info.email?this.props.driver.personal_info.email+" ":"")+(this.props.driver.personal_info.phone_home?this.props.driver.personal_info.phone_home+" ":"")+(this.props.driver.personal_info.phone_mobile?this.props.driver.personal_info.phone_mobile+" ":""))),n.a.createElement(it.f,null,n.a.createElement(it.e,null," ")),n.a.createElement(it.f,null,n.a.createElement(it.e,null,"From: [DATE]"),n.a.createElement(it.e,null,"To: [DATE]")),n.a.createElement(it.f,null,n.a.createElement(it.e,null," ")),this.generateRideTable()))}}]),t}(r.Component),dt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(it.b,{document:n.a.createElement(ct,{driver:this.props.driver,rides:this.props.rides}),fileName:this.props.driver.personal_info.last_name+"-M"+ot.getDate()+(ot.getMonth()+1)+ot.getFullYear()},(function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Loading document...":"Download now!"})))}}]),t}(r.Component),ut=Object(p.b)((function(e){return{driver:e.active_profile,rides:e.rides}}),(function(e){return{}}))(dt),pt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={metric_options:"drivers"},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({metric_options:e})}},{key:"pickReport",value:function(){if("reports"===this.state.metric_options)return this.props.active_profile.id?n.a.createElement(ut,null):n.a.createElement("p",null,"Select a Person")}},{key:"changeTable",value:function(){switch(this.state.metric_options){case"riders":return n.a.createElement(tt,null);case"drivers":return n.a.createElement(rt,null);case"reports":return n.a.createElement(lt,null);default:return n.a.createElement(tt,null)}}},{key:"render",value:function(){return n.a.createElement(E.a,{style:{minWidth:"100%"}},n.a.createElement(Je.a,{className:"justify-content-between","aria-label":"Toolbar with Button groups"},n.a.createElement(qe.a,{type:"radio",name:"options",defaultValue:1,onChange:this.handleChange},n.a.createElement(Qe.a,{id:"riders",value:"riders"},"Riders"),n.a.createElement(Qe.a,{id:"drivers",value:"drivers"},"Drivers"),n.a.createElement(Qe.a,{id:"reports",value:"reports"},"Reports")),n.a.createElement(D.a,{sm:2},this.pickReport())),n.a.createElement("hr",null),this.changeTable())}}]),t}(r.Component),mt=Object(p.b)((function(e){return{active_profile:e.active_profile}}),(function(e){return{}}))(pt),ht=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={edit:!1,mode:"",password:""},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.show_operator!==e.show_operator&&this.setState({edit:!1})}},{key:"handleChange",value:function(e){var t=e.target.id.split("|")[1];"password"===t?(this.setState({password:e.target.value}),this.props.changeOperator("edit","password",e.target.value)):this.props.changeOperator("edit",t,e.target.value)}},{key:"villageOptions",value:function(){var e;return e=Object.values(this.props.villages).map((function(e){return n.a.createElement("option",{key:e.id,value:e.id,label:e.village_name})})),[n.a.createElement("option",{key:"",value:"",label:""})].concat(Object(pe.a)(e))}},{key:"saveOperator",value:function(){this.validate()&&("new"===this.state.mode?this.props.changeOperator("add"):this.props.changeOperator("save"),this.setState({edit:!1,password:"",mode:""}))}},{key:"deleteOperator",value:function(){window.confirm("Are you sure you want to delete this operator?\nTHIS CANNOT BE UNDONE!")&&(this.props.changeOperator("delete"),this.setState({edit:!1,password:"",mode:""}))}},{key:"validate",value:function(){return""===this.props.active_operator.first_name?(window.alert("INVALID NAME: Please provide a first name."),!1):""===this.props.active_operator.last_name?(window.alert("INVALID NAME: Please provide a last name."),!1):""===this.props.active_operator.email?(window.alert("INVALID EMAIL: Please provide an email."),!1):""===this.props.active_operator.phone?(window.alert("INVALID PHONE NUMBER: Please provide a phone number."),!1):""===this.props.active_operator.username?(window.alert("INVALID USERNAME: Please provide a username."),!1):"new"===this.state.mode&&""===this.props.active_operator.password?(window.alert("INVALID PASSWORD: Please provide a password."),!1):""!==this.props.active_operator.village_id||(window.alert("INVALID VILLAGE: Please select a Village for the Operator."),!1)}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",{style:{float:"left"}},this.props.active_operator.first_name?this.props.active_operator.first_name+" "+this.props.active_operator.last_name:"Select an Operator"),this.state.edit?n.a.createElement(n.a.Fragment,null,n.a.createElement(S.a,{variant:"success",style:{float:"right",marginLeft:"10px"},onClick:function(){return e.saveOperator()}},"Save"),"new"!==this.state.mode?n.a.createElement(S.a,{variant:"danger",style:{float:"right"},onClick:function(){return e.deleteOperator()}},"Delete"):null):n.a.createElement(n.a.Fragment,null,this.props.show_village&&this.props.show_operator?n.a.createElement(S.a,{variant:"dark",style:{float:"right"},onClick:function(){return e.setState({edit:!0,mode:"edit"})}},"Edit Operator"):n.a.createElement(S.a,{variant:"dark",style:{float:"right"},onClick:function(){return e.setState({edit:!0,mode:"new"})}},"Add Operator"))),n.a.createElement(f.a.Body,null,this.state.edit?n.a.createElement(oe.a,null,n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,"First Name: "),n.a.createElement("td",null,n.a.createElement(V.a.Control,{id:"admin|first_name",onChange:this.handleChange,value:this.props.active_operator.first_name}))),n.a.createElement("tr",null,n.a.createElement("td",null,"Last Name: "),n.a.createElement("td",null,n.a.createElement(V.a.Control,{id:"admin|last_name",onChange:this.handleChange,value:this.props.active_operator.last_name}))),n.a.createElement("tr",null,n.a.createElement("td",null,"Email: "),n.a.createElement("td",null,n.a.createElement(V.a.Control,{id:"admin|email",onChange:this.handleChange,value:this.props.active_operator.email}))),n.a.createElement("tr",null,n.a.createElement("td",null,"Phone Number: "),n.a.createElement("td",null,n.a.createElement(V.a.Control,{id:"admin|phone",onChange:this.handleChange,value:this.props.active_operator.phone}))),n.a.createElement("tr",null,n.a.createElement("td",null,"Username: "),n.a.createElement("td",null,n.a.createElement(V.a.Control,{id:"admin|username",onChange:this.handleChange,value:this.props.active_operator.username}))),n.a.createElement("tr",null,n.a.createElement("td",null,"Password: "),n.a.createElement("td",null,n.a.createElement(V.a.Control,{placeholder:"new"===this.state.mode?"":"Leave blank to keep existing password.",id:"admin|password",onChange:this.handleChange,value:this.state.password}))),n.a.createElement("tr",null,n.a.createElement("td",null,"Village: "),n.a.createElement("td",null,n.a.createElement(V.a.Control,{as:"select",id:"admin|village_id",onChange:this.handleChange,value:this.props.active_operator.village_id},this.villageOptions()))))):n.a.createElement(oe.a,null,n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,"Username: "),n.a.createElement("td",null,this.props.active_operator.username)),n.a.createElement("tr",null,n.a.createElement("td",null,"Email: "),n.a.createElement("td",null,this.props.active_operator.email)),n.a.createElement("tr",null,n.a.createElement("td",null,"Phone Number: "),n.a.createElement("td",null,this.props.active_operator.phone)),n.a.createElement("tr",null,n.a.createElement("td",null,"Village: "),n.a.createElement("td",null,this.props.active_village?this.props.active_village.village_name:""))))))}}]),t}(r.Component),vt=Object(p.b)((function(e){return{active_operator:e.active_operator,active_village:e.active_village,villages:e.villages}}),(function(e){return{changeOperator:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e({type:"change_admin",payload:{type:"operator",mode:t,field:a,value:r}})}}}))(ht),gt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={edit:!1,mode:""},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a.handleChangeVetting=a.handleChangeVetting.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.show_village!==e.show_village&&this.setState({edit:!1})}},{key:"handleChange",value:function(e){var t=e.target.id.split("|")[1];this.props.changeVillage("edit",t,e.target.value)}},{key:"handleChangeVetting",value:function(e,t){this.props.changeVillage("edit_vetting",e,t.target.value)}},{key:"saveVillage",value:function(){this.validate()&&("new"===this.state.mode?this.props.changeVillage("add"):this.props.changeVillage("save"),this.setState({edit:!1,password:"",mode:""}))}},{key:"deleteVillage",value:function(){window.confirm("Are you sure you want to delete this village?\nTHIS CANNOT BE UNDONE!")&&(this.props.changeVillage("delete"),this.setState({edit:!1,password:"",mode:""}))}},{key:"validate",value:function(){return""===this.props.active_village.village_name?(window.alert("INVALID NAME: Please provide a village name."),!1):""===this.props.active_village.email?(window.alert("INVALID EMAIL: Please provide an email."),!1):""===this.props.active_village.phone?(window.alert("INVALID PHONE NUMBER: Please provide a phone number."),!1):""!==this.props.active_village.vetting||(window.alert("INVALID VETTING: Please list out vetting criteria."),!1)}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a.Header,null,n.a.createElement("h5",{style:{float:"left"}},this.props.active_village&&this.props.active_village.village_name?this.props.active_village.village_name:"Select a Village"),this.state.edit?n.a.createElement(n.a.Fragment,null,n.a.createElement(S.a,{variant:"success",style:{float:"right",marginLeft:"10px"},onClick:function(){return e.saveVillage()}},"Save"),"new"!==this.state.mode?n.a.createElement(S.a,{variant:"danger",style:{float:"right"},onClick:function(){return e.deleteVillage()}},"Delete"):null):n.a.createElement(n.a.Fragment,null,this.props.show_village&&this.props.active_village&&this.props.active_village.id?n.a.createElement(S.a,{variant:"dark",style:{float:"right"},onClick:function(){return e.setState({edit:!0,mode:"edit"})}},"Edit Village"):n.a.createElement(S.a,{variant:"dark",style:{float:"right"},onClick:function(){return e.setState({edit:!0,mode:"new"})}},"Add Village"))),n.a.createElement(f.a.Body,null,this.state.edit?n.a.createElement(oe.a,null,n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,"Village Name: "),n.a.createElement("td",null,n.a.createElement(V.a.Control,{id:"admin|village_name",onChange:this.handleChange,value:this.props.active_village.village_name}))),n.a.createElement("tr",null,n.a.createElement("td",null,"Email: "),n.a.createElement("td",null,n.a.createElement(V.a.Control,{id:"admin|email",onChange:this.handleChange,value:this.props.active_village.email}))),n.a.createElement("tr",null,n.a.createElement("td",null,"Phone: "),n.a.createElement("td",null,n.a.createElement(V.a.Control,{id:"admin|phone",onChange:this.handleChange,value:this.props.active_village.phone}))),n.a.createElement("tr",null,n.a.createElement("td",null,"Vetting Criteria: "),this.props.active_village.vetting.map((function(t,a){return n.a.createElement(V.a.Control,{id:"admin|vetting",onChange:function(a){return e.handleChangeVetting(t,a)},value:t})})),n.a.createElement(V.a.Control,{id:"admin|vetting",onChange:function(t){return e.handleChangeVetting(null,t)}})))):n.a.createElement(oe.a,null,n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,"Email: "),n.a.createElement("td",null,this.props.show_village&&this.props.villages[this.props.show_village]?this.props.villages[this.props.show_village].email:null)),n.a.createElement("tr",null,n.a.createElement("td",null,"Phone Number: "),n.a.createElement("td",null,this.props.show_village&&this.props.villages[this.props.show_village]?this.props.villages[this.props.show_village].phone:null))))))}}]),t}(r.Component),Et=Object(h.f)(Object(p.b)((function(e){return{active_village:e.active_village,villages:e.villages}}),(function(e){return{changeVillage:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e({type:"change_admin",payload:{type:"village",mode:t,field:a,value:r}})}}}))(gt)),ft=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"showVillage",value:function(e){this.props.show("",e)}},{key:"showOperator",value:function(e,t){this.props.show(e,t)}},{key:"genVillageRows",value:function(){var e=this,t=[];t.push(n.a.createElement(S.a,{variant:"light",onClick:function(){return e.showVillage("")},key:""},"--Clear Selection--")),t.push(n.a.createElement("br",{key:"break"}));for(var a=function(){var a=l[r];t.push(n.a.createElement(Ue.a.Item,{active:e.props.show_village===a.id,onClick:function(){return e.showVillage(a.id)},key:a.id},a.village_name))},r=0,l=Object.values(this.props.villages);r<l.length;r++)a();return t}},{key:"genOperatorRows",value:function(){var e=this,t=[],a=Object.values(this.props.villages);""!==this.props.show_village&&(a=[this.props.villages[this.props.show_village]]);var r=!0,l=!1,i=void 0;try{for(var o,s=function(){var a=o.value,r=Object.values(e.props.operators).filter((function(e){return e.village_id===a.id})),l=!0,i=!1,s=void 0;try{for(var c,d=function(){var r=c.value;t.push(n.a.createElement(Ue.a.Item,{active:e.props.show_operator===r.id,onClick:function(){return e.showOperator(r.id,a.id)},key:r.id},r.first_name+" "+r.last_name))},u=r[Symbol.iterator]();!(l=(c=u.next()).done);l=!0)d()}catch(p){i=!0,s=p}finally{try{l||null==u.return||u.return()}finally{if(i)throw s}}},c=a[Symbol.iterator]();!(r=(o=c.next()).done);r=!0)s()}catch(d){l=!0,i=d}finally{try{r||null==c.return||c.return()}finally{if(l)throw i}}return t}},{key:"render",value:function(){return n.a.createElement(R.a,{style:{paddingLeft:"15px",paddingRight:"15px",height:"85vh"}},n.a.createElement(D.a,{xs:3,style:{height:"100%"}},n.a.createElement(f.a,{style:{height:"100%"}},n.a.createElement(f.a.Header,null,n.a.createElement("h5",{style:{float:"left"}},"Villages")),n.a.createElement(f.a.Body,{style:{overflow:"scroll"}},n.a.createElement(Ue.a,null,this.genVillageRows())))),n.a.createElement(D.a,{xs:3,style:{height:"100%"}},n.a.createElement(f.a,{style:{height:"100%"}},n.a.createElement(f.a.Header,null,n.a.createElement("h5",{style:{float:"left"}},"Operators")),n.a.createElement(f.a.Body,{style:{overflow:"scroll"}},n.a.createElement(Ue.a,null,this.genOperatorRows())))),n.a.createElement(D.a,{xs:6,style:{height:"100%"}},n.a.createElement(R.a,null,n.a.createElement(D.a,null,n.a.createElement(f.a,null,n.a.createElement(Et,{show_village:this.props.show_village})))),n.a.createElement("br",null),n.a.createElement(R.a,null,n.a.createElement(D.a,null,n.a.createElement(f.a,null,n.a.createElement(vt,{show_village:this.props.show_village,show_operator:this.props.show_operator}))))))}}]),t}(r.Component),_t=Object(p.b)((function(e){return{villages:e.villages,operators:e.operators,show_village:e.admin.show_village,show_operator:e.admin.show_operator}}),(function(e){return{debug:function(){return e({type:"dump_store",payload:null})},show:function(t,a){return e({type:"admin_page",payload:{id:t,village:a}})}}}))(ft),yt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){}},{key:"render",value:function(){return n.a.createElement("div",null,"The page you've requested cannot be found.")}}]),t}(r.Component),bt=Object(p.b)((function(e){return{}}),(function(e){return{}}))(yt),Ct=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(m.a,null,n.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css",integrity:"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T",crossOrigin:"anonymous"}),k.a.load("token")?this.props.loaded?n.a.createElement("div",null,n.a.createElement($.e,{id:"script-loader",googleMapsApiKey:k.a.load("googlemapstoken"),libraries:["places"]},n.a.createElement(L,null),n.a.createElement(h.c,null,n.a.createElement(h.a,{path:"/Dashboard",component:ne}),n.a.createElement(h.a,{path:"/Scheduler",component:ye}),n.a.createElement(h.a,{path:"/Profiles/Register",component:Be}),n.a.createElement(h.a,{path:"/Profiles/User/*",component:ze}),n.a.createElement(h.a,{path:"/Profiles",component:Ce}),n.a.createElement(h.a,{path:"/Ledger/EditRide",component:Ke}),n.a.createElement(h.a,{path:"/Ledger",component:$e}),n.a.createElement(h.a,{path:"/Metrics",component:mt}),n.a.createElement(h.a,{path:"/Admin",component:_t}),n.a.createElement(h.a,{path:"/",component:bt})))):n.a.createElement(j,null):n.a.createElement(U,null)))}}]),t}(r.Component),kt=Object(p.b)((function(e){return{authenticated:e.authenticated,loaded:e.loaded}}),(function(e){return{}}))(Ct);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ot=a(169),wt=a(29),jt=a.n(wt),At=a(360),Dt=a.n(At),St=void 0,Nt={name:"",line_1:"",line_2:"",city:"",state:"",zip:"",special_instructions:"",geolocation:{lat:0,lng:0}},Lt={make_model:"",year:"",color:"",lp:"",insp_date:"",insur_provider:"",insur_policy:"",insur_exp:"",insur_coverage:0,seats:0,special:""},Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"monday";return{day:e,start:"",end:""}},It={id:"",user_type:"",primary_village_id:"",villages:[],status:"active",personal_info:{first_name:"",last_name:"",email:"",phone_mobile:"",phone_home:"",preferred_communication:"",language:[]},emergency_contact:{first_name:"",last_name:"",email:"",phone_mobile:"",phone_home:"",preferred_communication:"",relationship:""},caregiver:{first_name:"",last_name:"",email:"",phone_mobile:"",phone_home:"",preferred_communication:""},addresses:[Nt],accommodations:{allergies:"",mobility_aid:"",smoke_preference:"",special:""},vehicles:[Lt],volunteer_hours:[0,1,2,3,4,5,6].map((function(e){return Pt(e)})),driver_specific:{vetting:""}},Rt={status:"",id:"",rider:{first_name:"",last_name:"",id:""},driver:{first_name:"",last_name:"",id:"",vehicle:Lt,home_geolocation:""},locations:{pickup:{address:"",time:"",special:"",geolocation:""},dropoff:{address:"",time:"",special:"",geolocation:""}},ride_data:{village_id:"",mileage:{driver:"",rider:""},time_total:{driver:"",rider:""},driver_confirmed:!1,traffic:"",date:"",purpose:"",associated_ride:{ride_id:"",driver_id:""},meta:{return:!1,givendropoff:"true",pickup_CA:"",dropoff_CA:""}}},Vt={id:"",village_name:"",email:"",phone:"",vetting:[],defaults:{}},Tt={id:"",first_name:"",last_name:"",email:"",phone:"",password:"",username:"",village_id:""},Ht={authenticated:!1,loaded:!1,operator:{first_name:"",last_name:"",village_id:""},villages:{},users:{},rides:{},operators:{},active_profile:jt.a.cloneDeep(It),active_ride:jt.a.cloneDeep(Rt),active_village:jt.a.cloneDeep(Vt),active_operator:jt.a.cloneDeep(Tt),admin:{show_village:"",show_operator:""}},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dump_store":return console.log(e),e;case"trigger_update":var a=jt.a.cloneDeep(e);return a;case"authenticate":var r=jt.a.cloneDeep(e);return r.operator.admin="admin"===t.payload.village_id,r.operator.id=t.payload.id,r.operator.first_name=t.payload.first_name,r.operator.last_name=t.payload.last_name,r;case"logout":var n=jt.a.cloneDeep(e);return n.authenticated=!1,n.loaded=!1,n;case"load":var l=jt.a.cloneDeep(e);switch(t.payload.tag){case"loaded":l.loaded=t.payload.data;break;case"villages":l.villages=t.payload.data;break;case"users":l.users=t.payload.data;break;case"rides":l.rides=t.payload.data;break;case"operators":l.operators=t.payload.data}return l;case"admin_page":var i=jt.a.cloneDeep(e);return""===t.payload.village?(i.active_village=jt.a.cloneDeep(Vt),i.admin.show_village=""):(i.active_village=e.villages[t.payload.village],i.admin.show_village=t.payload.village),""===t.payload.id?(i.active_operator=jt.a.cloneDeep(Tt),i.admin.show_operator=""):(i.active_operator=e.operators[t.payload.id],i.admin.show_operator=t.payload.id),i;case"change_admin":var o=jt.a.cloneDeep(e);if("operator"===t.payload.type)switch(t.payload.mode){case"add":g.a.post(b+"/database/operators/operator",{operator:o.active_operator},{headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(e){k.a.save("token",e.headers.token,{path:"/",maxAge:3600}),o.active_operator.id=e.data.id,o.operators[e.data.id]=o.active_operator}));break;case"edit":"password"===t.payload.field?o.active_operator.password=Dt.a.hashSync(t.payload.value,10):o.active_operator[t.payload.field]=t.payload.value;break;case"save":var s=jt.a.cloneDeep(o.active_operator);g.a.put(b+"/database/operators/operator",{operator:s},{headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(e){k.a.save("token",e.headers.token,{path:"/",maxAge:3600}),o.operators[o.active_operator.id]=Object(P.a)({},o.active_operator,{},s)}));break;case"delete":g.a.delete(b+"/database/operators/operator",{data:{operator_id:o.active_operator.id},headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(e){k.a.save("token",e.headers.token,{path:"/",maxAge:3600}),delete o.operators[o.active_operator.id],o.active_village=jt.a.cloneDeep(Vt),o.active_operator=jt.a.cloneDeep(Vt)}))}else if("village"===t.payload.type)switch(t.payload.mode){case"add":g.a.post(b+"/database/villages/village",{village:o.active_village},{headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(e){k.a.save("token",e.headers.token,{path:"/",maxAge:3600}),o.active_village.id=e.data.id,o.villages[e.data.id]=o.active_village,o.admin.show_village=e.data.id,St.forceUpdate()}));break;case"edit":o.active_village[t.payload.field]=t.payload.value;break;case"edit_vetting":var c=o.active_village.vetting.indexOf(t.payload.field);c>-1&&o.active_village.vetting.splice(c,1),t.payload.value&&t.payload.value.length>0&&o.active_village.vetting.push(t.payload.value);break;case"save":g.a.put(b+"/database/villages/village",{village:o.active_village},{headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(e){k.a.save("token",e.headers.token,{path:"/",maxAge:3600})})),o.villages[o.active_village.id]=jt.a.cloneDeep(o.active_village);break;case"delete":o.operators&&!Object.keys(o.operators).includes(o.active_village.id)?(g.a.delete(b+"/database/villages/village",{data:{village_id:o.active_village.id},headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(e){k.a.save("token",e.headers.token,{path:"/",maxAge:3600})})),delete o.village[o.active_village.id],o.active_village=jt.a.cloneDeep(Vt),o.active_operator=jt.a.cloneDeep(Vt),St.forceUpdate()):window.alert("You CANNOT delete a village that still has active riders, drivers, or operators!")}return o;case"add_user":var d=jt.a.cloneDeep(e);return d.users[t.payload.id]=t.payload,d;case"clear_active_profile":var u=jt.a.cloneDeep(e);return u.active_profile=jt.a.cloneDeep(It),u;case"set_active_user":var p=jt.a.cloneDeep(e);return p.active_profile=t.payload,p;case"ridebreakdown":var m=jt.a.cloneDeep(e);return m.ridebreakdown=t.payload,m;case"registration":var h=jt.a.cloneDeep(e);switch(t.payload.id){case"user_type":h.active_profile[t.payload.id]=t.payload.value;break;case"primary_village_id":h.active_profile[t.payload.id]=t.payload.value,h.active_profile.villages=[t.payload.value];break;case"add_address":h.active_profile.addresses.push(jt.a.cloneDeep(Nt));break;case"remove_address":h.active_profile.addresses.splice(t.payload.value,1);break;case"add_vehicle":h.active_profile.vehicles.push(jt.a.cloneDeep(Lt));break;case"remove_vehicle":h.active_profile.vehicles.splice(t.payload.value,1);break;case"add_vol_hours":h.active_profile.volunteer_hours.push(jt.a.cloneDeep(Pt()));break;case"remove_vol_hours":h.active_profile.volunteer_hours.splice(t.payload.value,1);break;default:"addresses"===t.payload.type?"lng"===t.payload.id.split("|")[1]?h.active_profile[t.payload.type][t.payload.id.split("|")[0]].geolocation[t.payload.id.split("|")[1]]=t.payload.value:"lat"===t.payload.id.split("|")[1]?h.active_profile[t.payload.type][t.payload.id.split("|")[0]].geolocation[t.payload.id.split("|")[1]]=t.payload.value:h.active_profile[t.payload.type][t.payload.id.split("|")[0]][t.payload.id.split("|")[1]]=t.payload.value:"vehicles"===t.payload.type?h.active_profile[t.payload.type][t.payload.id.split("|")[0]][t.payload.id.split("|")[1]]=t.payload.value:"volunteer_hours"===t.payload.type?h.active_profile[t.payload.type][t.payload.id.split("|")[0]][t.payload.id.split("|")[1]]=t.payload.value:h.active_profile[t.payload.type][t.payload.id]=t.payload.value}return h;case"scheduler":var v=jt.a.cloneDeep(e);if("date"===t.payload.type)v.active_ride.ride_data.date=t.payload.value;else if("purpose"===t.payload.type)v.active_ride.ride_data.purpose=t.payload.value;else if("samereturn"===t.payload.type)v.active_ride.ride_data.meta.samereturn=t.payload.value;else if("givendropoff"===t.payload.type)v.active_ride.ride_data.meta.givendropoff=t.payload.value;else if("driver_confirmed"===t.payload.type)v.active_ride.ride_data.driver_confirmed=t.payload.value;else if("vehicle"===t.payload.type){var E=v.users[t.payload.field].vehicles.filter((function(e){return e.lp===t.payload.value}))[0];v.active_ride.driver.vehicle=E}else if("common_address"===t.payload.type){var f=t.payload.field.split("|");if("set"===f[0])"pickup"===f[1]?v.active_ride.ride_data.meta.pickup_CA=t.payload.value:"dropoff"===f[1]&&(v.active_ride.ride_data.meta.dropoff_CA=t.payload.value);else{var _=t.payload.value.split("|"),y=e.users[_[0]].addresses.filter((function(e){return e.line_1===_[1]}))[0];"pickup"===f[0]?(v.active_ride.locations[t.payload.field].address=y.line_1,v.active_ride.locations[t.payload.field].geolocation=y.geolocation,v.active_ride.ride_data.meta.pickup_CA=!0):"dropoff"===f[0]&&(v.active_ride.locations[t.payload.field].address=y.line_1,v.active_ride.locations[t.payload.field].geolocation=y.geolocation,v.active_ride.ride_data.meta.dropoff_CA=!0)}}else v.active_ride.locations[t.payload.type][t.payload.field]=t.payload.value;return v;case"set_ride_participant":var C=jt.a.cloneDeep(e);return"rider"===t.payload.type?(C.active_ride.rider.first_name=t.payload.user.personal_info.first_name,C.active_ride.rider.last_name=t.payload.user.personal_info.last_name,C.active_ride.rider.id=t.payload.user.id,C.active_ride.ride_data.village_id=t.payload.user.primary_village_id):"driver"===t.payload.type&&(C.active_ride.driver.first_name=t.payload.user.personal_info.first_name,C.active_ride.driver.last_name=t.payload.user.personal_info.last_name,C.active_ride.driver.geolocation=t.payload.user.addresses[0].geolocation,C.active_ride.driver.id=t.payload.user.id),C;case"user_update":var O=jt.a.cloneDeep(e),w=O.active_profile.id;return w&&(O.users[w]=O.active_profile,g.a.put(b+"/database/users/user",{user:O.active_profile},{headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(e){k.a.save("token",e.headers.token,{path:"/",maxAge:3600})}))),O;case"user_deactivate":var j=jt.a.cloneDeep(e);return g.a.patch(b+"/database/users/user/status",{user_id:j.active_profile.id,status:"inactive"},{headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(e){k.a.save("token",e.headers.token,{path:"/",maxAge:3600})})),j.active_profile.status="inactive",j.users[j.active_profile.id].status="active",j;case"user_activate":var A=jt.a.cloneDeep(e);return g.a.patch(b+"/database/users/user/status",{user_id:A.active_profile.id,status:"active"},{headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(e){k.a.save("token",e.headers.token,{path:"/",maxAge:3600})})),A.active_profile.status="active",A.users[A.active_profile.id].status="active",A;case"user_perma_delete":var D=jt.a.cloneDeep(e);return g.a.delete(b+"/database/users/user",{data:{user_id:D.active_profile.id},headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(e){k.a.save("token",e.headers.token,{path:"/",maxAge:3600})})),delete D.users[D.active_profile.id],D.active_profile=jt.a.cloneDeep(It),D;case"ride_cancel":var S=jt.a.cloneDeep(e);return g.a.delete(b+"/database/rides/ride",{data:{ride_id:t.payload},headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(e){k.a.save("token",e.headers.token,{path:"/",maxAge:3600})})),delete S.rides[t.payload],S;case"ride_save":var N=jt.a.cloneDeep(e);return g.a.put(b+"/database/rides/ride",{ride:t.payload},{headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(e){k.a.save("token",e.headers.token,{path:"/",maxAge:3600})})),N.rides[t.payload.id]=t.payload,N;case"ride_deactivate":var L=jt.a.cloneDeep(e),I=t.payload;return g.a.patch(b+"/database/rides/ride/status",{ride_id:I,status:"inactive"},{headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(e){k.a.save("token",e.headers.token,{path:"/",maxAge:3600})})),L.rides[I].status="inactive",L;case"ride_reactivate":var R=jt.a.cloneDeep(e),V=t.payload;return g.a.patch(b+"/database/rides/ride/status",{ride_id:V,status:"active"},{headers:{Authorization:"BEARER "+k.a.load("token")}}).then((function(e){k.a.save("token",e.headers.token,{path:"/",maxAge:3600})})),R.rides[V].status="active",R;case"add_ride":var T=jt.a.cloneDeep(e);return T.rides[t.payload.id]=t.payload,T;case"update_active_ride":var H=jt.a.cloneDeep(e);return H.active_ride=jt.a.cloneDeep(t.payload),H;case"setup_return_ride":var M=jt.a.cloneDeep(e);return M.active_ride=jt.a.cloneDeep(Rt),M.active_ride.locations.dropoff.address=e.active_ride.locations.pickup.address,M.active_ride.locations.pickup.address=e.active_ride.locations.dropoff.address,M.active_ride.locations.dropoff.geolocation=e.active_ride.locations.pickup.geolocation,M.active_ride.locations.pickup.geolocation=e.active_ride.locations.dropoff.geolocation,M.active_ride.ride_data.date=e.active_ride.ride_data.date,M.active_ride.ride_data.village_id=e.active_ride.ride_data.village_id,M.active_ride.rider=e.active_ride.rider,M.active_ride.ride_data.meta.return=!0,M;case"active_ride":var x=jt.a.cloneDeep(e);return x.active_ride=jt.a.cloneDeep(t.payload),x;case"clear_active_ride":var B=jt.a.cloneDeep(e);return B.active_ride=jt.a.cloneDeep(Rt),B;default:return e}};var xt,Bt=(xt=window.REDUX_INITIAL_DATA,Object(Ot.b)(Mt,xt));i.a.render(n.a.createElement(p.a,{store:Bt},n.a.createElement(kt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[361,1,2]]]);
//# sourceMappingURL=main.5dc52e46.chunk.js.map